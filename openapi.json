{
  "openapi": "3.1.0",
  "info": {
    "title": "soma",
    "description": "An open source AI agent runtime",
    "license": {
      "name": "",
      "identifier": "Elastic License 2.0"
    },
    "version": "v1"
  },
  "paths": {
    "/_internal/v1/health": {
      "get": {
        "tags": [
          "_internal",
          "v1"
        ],
        "summary": "Health check",
        "description": "Check the health status of the service and SDK server connectivity",
        "operationId": "health-check",
        "responses": {
          "200": {
            "description": "Health check",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthCheckResponse"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/encryption/v1/dek/alias": {
      "post": {
        "tags": [
          "encryption",
          "v1"
        ],
        "summary": "Create DEK alias",
        "description": "Create an alias for a data encryption key to enable lookup by friendly name",
        "operationId": "create-dek-alias",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateDekAliasRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Create DEK alias",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DataEncryptionKeyAlias"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/encryption/v1/dek/alias/{alias}": {
      "get": {
        "tags": [
          "encryption",
          "v1"
        ],
        "summary": "Get DEK by alias",
        "description": "Retrieve a data encryption key by its alias or ID",
        "operationId": "get-dek-by-alias-or-id",
        "parameters": [
          {
            "name": "alias",
            "in": "path",
            "description": "DEK alias or ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Get DEK by alias or ID",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DataEncryptionKey"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "put": {
        "tags": [
          "encryption",
          "v1"
        ],
        "summary": "Update DEK alias",
        "description": "Update the alias for a data encryption key",
        "operationId": "update-dek-alias",
        "parameters": [
          {
            "name": "alias",
            "in": "path",
            "description": "DEK alias",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateAliasParams"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Update DEK alias",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DataEncryptionKeyAlias"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "delete": {
        "tags": [
          "encryption",
          "v1"
        ],
        "summary": "Delete DEK alias",
        "description": "Delete an alias for a data encryption key",
        "operationId": "delete-dek-alias",
        "parameters": [
          {
            "name": "alias",
            "in": "path",
            "description": "DEK alias",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Delete DEK alias"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/encryption/v1/envelope": {
      "get": {
        "tags": [
          "encryption",
          "v1"
        ],
        "summary": "List envelope keys",
        "description": "List all envelope encryption keys (master keys) with pagination",
        "operationId": "list-envelope-encryption-keys",
        "parameters": [
          {
            "name": "page_size",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            },
            "style": "form"
          },
          {
            "name": "next_page_token",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          }
        ],
        "responses": {
          "200": {
            "description": "List envelope encryption keys",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EnvelopeEncryptionKeyPaginatedResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "post": {
        "tags": [
          "encryption",
          "v1"
        ],
        "summary": "Create envelope key",
        "description": "Create a new envelope encryption key (master key) for encrypting data encryption keys",
        "operationId": "create-envelope-encryption-key",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EnvelopeEncryptionKey"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Create envelope encryption key",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EnvelopeEncryptionKey"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/encryption/v1/envelope/{envelope_id}/dek": {
      "get": {
        "tags": [
          "encryption",
          "v1"
        ],
        "summary": "List data keys",
        "description": "List all data encryption keys encrypted with the specified envelope encryption key",
        "operationId": "list-data-encryption-keys-by-envelope",
        "parameters": [
          {
            "name": "envelope_id",
            "in": "path",
            "description": "Envelope encryption key ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page_size",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            },
            "style": "form"
          },
          {
            "name": "next_page_token",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          }
        ],
        "responses": {
          "200": {
            "description": "List data encryption keys",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DataEncryptionKeyListItemPaginatedResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "post": {
        "tags": [
          "encryption",
          "v1"
        ],
        "summary": "Create data key",
        "description": "Create a new data encryption key (DEK) encrypted with the specified envelope encryption key",
        "operationId": "create-data-encryption-key",
        "parameters": [
          {
            "name": "envelope_id",
            "in": "path",
            "description": "Envelope encryption key ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateDataEncryptionKeyParamsRoute"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Create data encryption key",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DataEncryptionKey"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/encryption/v1/envelope/{envelope_id}/dek/import": {
      "post": {
        "tags": [
          "encryption",
          "v1"
        ],
        "summary": "Import data key",
        "description": "Import an existing pre-encrypted data encryption key into the system",
        "operationId": "import-data-encryption-key",
        "parameters": [
          {
            "name": "envelope_id",
            "in": "path",
            "description": "Envelope encryption key ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ImportDataEncryptionKeyParamsRoute"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Import data encryption key",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DataEncryptionKey"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/encryption/v1/envelope/{envelope_id}/dek/{dek_id}/migrate": {
      "post": {
        "tags": [
          "encryption",
          "v1"
        ],
        "summary": "Migrate data key",
        "description": "Migrate a data encryption key to be encrypted with a different envelope encryption key",
        "operationId": "migrate-data-encryption-key",
        "parameters": [
          {
            "name": "envelope_id",
            "in": "path",
            "description": "Envelope encryption key ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "dek_id",
            "in": "path",
            "description": "Data encryption key ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MigrateDataEncryptionKeyParamsRoute"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Migrate data encryption key"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/encryption/v1/envelope/{envelope_id}/migrate": {
      "post": {
        "tags": [
          "encryption",
          "v1"
        ],
        "summary": "Migrate all data keys",
        "description": "Migrate all data encryption keys encrypted with the specified envelope key to a new envelope key",
        "operationId": "migrate-all-data-encryption-keys",
        "parameters": [
          {
            "name": "envelope_id",
            "in": "path",
            "description": "Envelope encryption key ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MigrateAllDataEncryptionKeysParamsRoute"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Migrate all data encryption keys"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/environment/v1/secret": {
      "get": {
        "tags": [
          "environment",
          "v1"
        ],
        "summary": "List secrets",
        "description": "List all secrets with pagination (values are encrypted)",
        "operationId": "list-secrets",
        "parameters": [
          {
            "name": "page_size",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            },
            "style": "form"
          },
          {
            "name": "next_page_token",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          }
        ],
        "responses": {
          "200": {
            "description": "List secrets",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ListSecretsResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "post": {
        "tags": [
          "environment",
          "v1"
        ],
        "summary": "Create secret",
        "description": "Create a new encrypted secret with the specified key and value",
        "operationId": "create-secret",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSecretRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Create a secret",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Secret"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/environment/v1/secret/import": {
      "post": {
        "tags": [
          "environment",
          "v1"
        ],
        "summary": "Import secret",
        "description": "Import an existing pre-encrypted secret into the system",
        "operationId": "import-secret",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ImportSecretRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Import a pre-encrypted secret",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Secret"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/environment/v1/secret/key/{key}": {
      "get": {
        "tags": [
          "environment",
          "v1"
        ],
        "summary": "Get secret by key",
        "description": "Retrieve a secret by its key name",
        "operationId": "get-secret-by-key",
        "parameters": [
          {
            "name": "key",
            "in": "path",
            "description": "Secret key",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Get secret by key",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Secret"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/environment/v1/secret/list-decrypted": {
      "get": {
        "tags": [
          "environment",
          "v1"
        ],
        "summary": "List decrypted secrets",
        "description": "List all secrets with decrypted values (requires decryption access)",
        "operationId": "list-decrypted-secrets",
        "parameters": [
          {
            "name": "page_size",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            },
            "style": "form"
          },
          {
            "name": "next_page_token",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          }
        ],
        "responses": {
          "200": {
            "description": "List secrets with decrypted values",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ListDecryptedSecretsResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/environment/v1/secret/{secret_id}": {
      "get": {
        "tags": [
          "environment",
          "v1"
        ],
        "summary": "Get secret",
        "description": "Retrieve a secret by its unique identifier",
        "operationId": "get-secret-by-id",
        "parameters": [
          {
            "name": "secret_id",
            "in": "path",
            "description": "Secret ID",
            "required": true,
            "schema": {
              "$ref": "#/components/schemas/WrappedUuidV4"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Get secret by id",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Secret"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "put": {
        "tags": [
          "environment",
          "v1"
        ],
        "summary": "Update secret",
        "description": "Update an existing secret's value or metadata",
        "operationId": "update-secret",
        "parameters": [
          {
            "name": "secret_id",
            "in": "path",
            "description": "Secret ID",
            "required": true,
            "schema": {
              "$ref": "#/components/schemas/WrappedUuidV4"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateSecretRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Update secret",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Secret"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "delete": {
        "tags": [
          "environment",
          "v1"
        ],
        "summary": "Delete secret",
        "description": "Delete a secret by its unique identifier",
        "operationId": "delete-secret",
        "parameters": [
          {
            "name": "secret_id",
            "in": "path",
            "description": "Secret ID",
            "required": true,
            "schema": {
              "$ref": "#/components/schemas/WrappedUuidV4"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Delete secret",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeleteSecretResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/environment/v1/variable": {
      "get": {
        "tags": [
          "environment",
          "v1"
        ],
        "summary": "List variables",
        "description": "List all environment variables with pagination",
        "operationId": "list-variables",
        "parameters": [
          {
            "name": "page_size",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            },
            "style": "form"
          },
          {
            "name": "next_page_token",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          }
        ],
        "responses": {
          "200": {
            "description": "List variables",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ListVariablesResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "post": {
        "tags": [
          "environment",
          "v1"
        ],
        "summary": "Create variable",
        "description": "Create a new environment variable with the specified key and value",
        "operationId": "create-variable",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateVariableRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Create a variable",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Variable"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/environment/v1/variable/import": {
      "post": {
        "tags": [
          "environment",
          "v1"
        ],
        "summary": "Import variable",
        "description": "Import an existing environment variable into the system",
        "operationId": "import-variable",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ImportVariableRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Import a variable",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Variable"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/environment/v1/variable/key/{key}": {
      "get": {
        "tags": [
          "environment",
          "v1"
        ],
        "summary": "Get variable by key",
        "description": "Retrieve an environment variable by its key name",
        "operationId": "get-variable-by-key",
        "parameters": [
          {
            "name": "key",
            "in": "path",
            "description": "Variable key",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Get variable by key",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Variable"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/environment/v1/variable/{variable_id}": {
      "get": {
        "tags": [
          "environment",
          "v1"
        ],
        "summary": "Get variable",
        "description": "Retrieve an environment variable by its unique identifier",
        "operationId": "get-variable-by-id",
        "parameters": [
          {
            "name": "variable_id",
            "in": "path",
            "description": "Variable ID",
            "required": true,
            "schema": {
              "$ref": "#/components/schemas/WrappedUuidV4"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Get variable by id",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Variable"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "put": {
        "tags": [
          "environment",
          "v1"
        ],
        "summary": "Update variable",
        "description": "Update an existing environment variable's value",
        "operationId": "update-variable",
        "parameters": [
          {
            "name": "variable_id",
            "in": "path",
            "description": "Variable ID",
            "required": true,
            "schema": {
              "$ref": "#/components/schemas/WrappedUuidV4"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateVariableRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Update variable",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Variable"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "delete": {
        "tags": [
          "environment",
          "v1"
        ],
        "summary": "Delete variable",
        "description": "Delete an environment variable by its unique identifier",
        "operationId": "delete-variable",
        "parameters": [
          {
            "name": "variable_id",
            "in": "path",
            "description": "Variable ID",
            "required": true,
            "schema": {
              "$ref": "#/components/schemas/WrappedUuidV4"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Delete variable",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeleteVariableResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/identity/scim/v2/Groups": {
      "get": {
        "tags": [
          "scim",
          "v1"
        ],
        "summary": "List SCIM Groups",
        "description": "List all groups with SCIM pagination. Supports filtering by various attributes.",
        "operationId": "scim-list-groups",
        "parameters": [
          {
            "name": "filter",
            "in": "query",
            "description": "Filter expression (e.g., userName eq \"john\")",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          },
          {
            "name": "sortBy",
            "in": "query",
            "description": "Attribute(s) to sort by",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          },
          {
            "name": "sortOrder",
            "in": "query",
            "description": "Sort order (ascending or descending)",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          },
          {
            "name": "startIndex",
            "in": "query",
            "description": "1-based index of the first result",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int64"
            },
            "style": "form"
          },
          {
            "name": "count",
            "in": "query",
            "description": "Number of results per page",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int64"
            },
            "style": "form"
          }
        ],
        "responses": {
          "200": {
            "description": "List of groups",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScimListResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "post": {
        "tags": [
          "scim",
          "v1"
        ],
        "summary": "Create SCIM Group",
        "description": "Create a new group from a SCIM Group payload. Members can be specified during creation.",
        "operationId": "scim-create-group",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ScimGroup"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Group created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScimGroup"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "409": {
            "description": "Conflict - Group already exists",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/identity/scim/v2/Groups/{group_id}": {
      "get": {
        "tags": [
          "scim",
          "v1"
        ],
        "summary": "Get SCIM Group",
        "description": "Retrieve a group by its unique identifier in SCIM format, including its members.",
        "operationId": "scim-get-group",
        "parameters": [
          {
            "name": "group_id",
            "in": "path",
            "description": "Group ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Group found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScimGroup"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Group not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "put": {
        "tags": [
          "scim",
          "v1"
        ],
        "summary": "Replace SCIM Group",
        "description": "Replace a group's attributes and members with the provided SCIM Group payload (PUT operation).",
        "operationId": "scim-replace-group",
        "parameters": [
          {
            "name": "group_id",
            "in": "path",
            "description": "Group ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ScimGroup"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Group replaced",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScimGroup"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Group not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "delete": {
        "tags": [
          "scim",
          "v1"
        ],
        "summary": "Delete SCIM Group",
        "description": "Delete a group by its unique identifier. This also removes all group memberships.",
        "operationId": "scim-delete-group",
        "parameters": [
          {
            "name": "group_id",
            "in": "path",
            "description": "Group ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Group deleted"
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Group not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "patch": {
        "tags": [
          "scim",
          "v1"
        ],
        "summary": "Patch SCIM Group",
        "description": "Partially update a group's attributes or members using SCIM PATCH operations (add, remove, replace).",
        "operationId": "scim-patch-group",
        "parameters": [
          {
            "name": "group_id",
            "in": "path",
            "description": "Group ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ScimPatchRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Group patched",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScimGroup"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Group not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/identity/scim/v2/Users": {
      "get": {
        "tags": [
          "scim",
          "v1"
        ],
        "summary": "List SCIM Users",
        "description": "List all users with SCIM pagination. Supports filtering by various attributes.",
        "operationId": "scim-list-users",
        "parameters": [
          {
            "name": "filter",
            "in": "query",
            "description": "Filter expression (e.g., userName eq \"john\")",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          },
          {
            "name": "sortBy",
            "in": "query",
            "description": "Attribute(s) to sort by",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          },
          {
            "name": "sortOrder",
            "in": "query",
            "description": "Sort order (ascending or descending)",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          },
          {
            "name": "startIndex",
            "in": "query",
            "description": "1-based index of the first result",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int64"
            },
            "style": "form"
          },
          {
            "name": "count",
            "in": "query",
            "description": "Number of results per page",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int64"
            },
            "style": "form"
          }
        ],
        "responses": {
          "200": {
            "description": "List of users",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScimListResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "post": {
        "tags": [
          "scim",
          "v1"
        ],
        "summary": "Create SCIM User",
        "description": "Create a new user from a SCIM User payload. The user will be created as a federated_user type.",
        "operationId": "scim-create-user",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ScimUser"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "User created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScimUser"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "409": {
            "description": "Conflict - User already exists",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/identity/scim/v2/Users/{user_id}": {
      "get": {
        "tags": [
          "scim",
          "v1"
        ],
        "summary": "Get SCIM User",
        "description": "Retrieve a user by their unique identifier in SCIM format.",
        "operationId": "scim-get-user",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "description": "User ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScimUser"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "put": {
        "tags": [
          "scim",
          "v1"
        ],
        "summary": "Replace SCIM User",
        "description": "Replace a user's attributes with the provided SCIM User payload (PUT operation).",
        "operationId": "scim-replace-user",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "description": "User ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ScimUser"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "User replaced",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScimUser"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "delete": {
        "tags": [
          "scim",
          "v1"
        ],
        "summary": "Delete SCIM User",
        "description": "Delete a user by their unique identifier. This also removes the user from all groups.",
        "operationId": "scim-delete-user",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "description": "User ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "User deleted"
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "patch": {
        "tags": [
          "scim",
          "v1"
        ],
        "summary": "Patch SCIM User",
        "description": "Partially update a user's attributes using SCIM PATCH operations (add, remove, replace).",
        "operationId": "scim-patch-user",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "description": "User ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ScimPatchRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "User patched",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScimUser"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/identity/v1/.well-known/jwks.json": {
      "get": {
        "tags": [
          "identity",
          "v1"
        ],
        "operationId": "route_get_jwks",
        "responses": {
          "200": {
            "description": "JWKS (JSON Web Key Set)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/JwksResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/identity/v1/api-key": {
      "get": {
        "tags": [
          "identity",
          "v1"
        ],
        "operationId": "route_list_api_keys",
        "parameters": [
          {
            "name": "page_size",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            },
            "style": "form"
          },
          {
            "name": "next_page_token",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          }
        ],
        "responses": {
          "200": {
            "description": "List of API keys",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ListApiKeysResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "post": {
        "tags": [
          "identity",
          "v1"
        ],
        "operationId": "route_create_api_key",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateApiKeyParams"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "API key created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateApiKeyResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/identity/v1/api-key/import": {
      "post": {
        "tags": [
          "identity",
          "v1"
        ],
        "operationId": "route_import_api_key",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EncryptedApiKeyConfig"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "API key imported successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TupleUnit"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/identity/v1/api-key/{id}": {
      "delete": {
        "tags": [
          "identity",
          "v1"
        ],
        "operationId": "route_delete_api_key",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "ID of the API key to delete",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "API key deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TupleUnit"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "API key not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/identity/v1/auth/authorize/{config_id}": {
      "get": {
        "tags": [
          "identity",
          "v1"
        ],
        "summary": "Start authorization",
        "description": "Initiates the OAuth/OIDC authorization flow by redirecting to the external IdP",
        "operationId": "route_start_authorization",
        "parameters": [
          {
            "name": "config_id",
            "in": "path",
            "description": "ID of the user auth flow configuration to use",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "redirect_after_login",
            "in": "query",
            "description": "Optional override for where to redirect after successful login",
            "required": false,
            "schema": {
              "type": [
                "string",
                "null"
              ]
            },
            "example": "/"
          }
        ],
        "responses": {
          "302": {
            "description": "Redirect to IdP authorization endpoint"
          },
          "404": {
            "description": "Configuration not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/identity/v1/auth/callback": {
      "get": {
        "tags": [
          "identity",
          "v1"
        ],
        "summary": "Authorization callback",
        "description": "Handles the OAuth/OIDC callback from the external IdP, exchanges the authorization code for tokens",
        "operationId": "route_auth_callback",
        "parameters": [
          {
            "name": "code",
            "in": "query",
            "description": "Authorization code from the IdP",
            "required": false,
            "schema": {
              "type": [
                "string",
                "null"
              ]
            },
            "example": "abc123"
          },
          {
            "name": "state",
            "in": "query",
            "description": "State parameter for CSRF validation",
            "required": false,
            "schema": {
              "type": [
                "string",
                "null"
              ]
            },
            "example": "xyz789"
          },
          {
            "name": "error",
            "in": "query",
            "description": "Error from the IdP (if any)",
            "required": false,
            "schema": {
              "type": [
                "string",
                "null"
              ]
            },
            "example": "access_denied"
          },
          {
            "name": "error_description",
            "in": "query",
            "description": "Error description from the IdP",
            "required": false,
            "schema": {
              "type": [
                "string",
                "null"
              ]
            },
            "example": "User denied access"
          }
        ],
        "responses": {
          "302": {
            "description": "Redirect to post-login URL with tokens set"
          },
          "400": {
            "description": "Invalid request or OAuth error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/identity/v1/auth/refresh": {
      "post": {
        "tags": [
          "identity",
          "v1"
        ],
        "summary": "Refresh access token",
        "description": "Refreshes an access token using a refresh token from the request body or cookie",
        "operationId": "route_refresh_token",
        "requestBody": {
          "description": "Optional refresh token in body. If not provided, will be read from cookie.",
          "content": {
            "application/json": {
              "schema": {
                "oneOf": [
                  {
                    "type": "null"
                  },
                  {
                    "$ref": "#/components/schemas/RefreshTokenRequest"
                  }
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Token refresh successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TokenResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/identity/v1/auth/whoami": {
      "get": {
        "tags": [
          "identity",
          "v1"
        ],
        "summary": "Get current identity",
        "description": "Returns the current authenticated identity based on the request headers (Authorization header, cookies, or API key)",
        "operationId": "route_whoami",
        "responses": {
          "200": {
            "description": "Current authenticated identity",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Identity"
                }
              }
            }
          },
          "401": {
            "description": "Authentication failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/identity/v1/groups": {
      "get": {
        "tags": [
          "identity",
          "v1"
        ],
        "summary": "List groups",
        "description": "List all groups with pagination",
        "operationId": "list-groups",
        "parameters": [
          {
            "name": "page_size",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            },
            "style": "form"
          },
          {
            "name": "next_page_token",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          }
        ],
        "responses": {
          "200": {
            "description": "List of groups",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GroupPaginatedResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "post": {
        "tags": [
          "identity",
          "v1"
        ],
        "summary": "Create group",
        "description": "Create a new group with the specified name",
        "operationId": "create-group",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateGroupRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Group created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Group"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/identity/v1/groups/{group_id}": {
      "get": {
        "tags": [
          "identity",
          "v1"
        ],
        "summary": "Get group",
        "description": "Retrieve a group by its unique identifier",
        "operationId": "get-group",
        "parameters": [
          {
            "name": "group_id",
            "in": "path",
            "description": "Group ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Group found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Group"
                }
              }
            }
          },
          "404": {
            "description": "Group not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "delete": {
        "tags": [
          "identity",
          "v1"
        ],
        "summary": "Delete group",
        "description": "Delete a group by its unique identifier",
        "operationId": "delete-group",
        "parameters": [
          {
            "name": "group_id",
            "in": "path",
            "description": "Group ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Group deleted"
          },
          "404": {
            "description": "Group not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "patch": {
        "tags": [
          "identity",
          "v1"
        ],
        "summary": "Update group",
        "description": "Update a group's name",
        "operationId": "update-group",
        "parameters": [
          {
            "name": "group_id",
            "in": "path",
            "description": "Group ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateGroupRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Group updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Group"
                }
              }
            }
          },
          "404": {
            "description": "Group not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/identity/v1/groups/{group_id}/members": {
      "get": {
        "tags": [
          "identity",
          "v1"
        ],
        "summary": "List group members",
        "description": "List all members of a group",
        "operationId": "list-group-members",
        "parameters": [
          {
            "name": "group_id",
            "in": "path",
            "description": "Group ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page_size",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            },
            "style": "form"
          },
          {
            "name": "next_page_token",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          }
        ],
        "responses": {
          "200": {
            "description": "List of group members",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GroupMemberWithUserPaginatedResponse"
                }
              }
            }
          },
          "404": {
            "description": "Group not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "post": {
        "tags": [
          "identity",
          "v1"
        ],
        "summary": "Add group member",
        "description": "Add a user to a group",
        "operationId": "add-group-member",
        "parameters": [
          {
            "name": "group_id",
            "in": "path",
            "description": "Group ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddGroupMemberRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Member added"
          },
          "404": {
            "description": "Group or user not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/identity/v1/groups/{group_id}/members/{user_id}": {
      "delete": {
        "tags": [
          "identity",
          "v1"
        ],
        "summary": "Remove group member",
        "description": "Remove a user from a group",
        "operationId": "remove-group-member",
        "parameters": [
          {
            "name": "group_id",
            "in": "path",
            "description": "Group ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "user_id",
            "in": "path",
            "description": "User ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Member removed"
          },
          "404": {
            "description": "Group, user, or membership not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/identity/v1/jwk": {
      "get": {
        "tags": [
          "identity",
          "v1"
        ],
        "operationId": "route_list_jwks",
        "parameters": [
          {
            "name": "page_size",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            },
            "style": "form"
          },
          {
            "name": "next_page_token",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          }
        ],
        "responses": {
          "200": {
            "description": "List of JWKs",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/JwkResponsePaginatedResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/identity/v1/jwk/{kid}/invalidate": {
      "post": {
        "tags": [
          "identity",
          "v1"
        ],
        "operationId": "route_invalidate_jwk",
        "parameters": [
          {
            "name": "kid",
            "in": "path",
            "description": "Key ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "JWK invalidated successfully"
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "JWK not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/identity/v1/sts-configuration": {
      "get": {
        "tags": [
          "identity",
          "v1"
        ],
        "summary": "List STS configurations",
        "description": "List all STS configurations with optional filtering by type",
        "operationId": "route_list_sts_configs",
        "parameters": [
          {
            "name": "page_size",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            },
            "style": "form"
          },
          {
            "name": "next_page_token",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          }
        ],
        "responses": {
          "200": {
            "description": "List of STS configurations",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StsTokenConfigPaginatedResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "post": {
        "tags": [
          "identity",
          "v1"
        ],
        "summary": "Create STS configuration",
        "description": "Create a new STS configuration (e.g., JWT template or dev settings)",
        "operationId": "route_create_sts_config",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/StsTokenConfig"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "STS configuration created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StsTokenConfig"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/identity/v1/sts-configuration/{id}": {
      "get": {
        "tags": [
          "identity",
          "v1"
        ],
        "summary": "Get STS configuration",
        "description": "Get an STS configuration by ID",
        "operationId": "route_get_sts_config",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "ID of the STS configuration to retrieve",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "STS configuration found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StsTokenConfig"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "STS configuration not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "delete": {
        "tags": [
          "identity",
          "v1"
        ],
        "summary": "Delete STS configuration",
        "description": "Delete an STS configuration by ID",
        "operationId": "route_delete_sts_config",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "ID of the STS configuration to delete",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "STS configuration deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TupleUnit"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "STS configuration not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/identity/v1/sts/{sts_config_id}": {
      "post": {
        "tags": [
          "identity",
          "v1"
        ],
        "summary": "Exchange STS token",
        "description": "Exchange an external token for internal access and refresh tokens using an STS configuration",
        "operationId": "route_exchange_sts_token",
        "parameters": [
          {
            "name": "sts_config_id",
            "in": "path",
            "description": "STS configuration ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Token exchange successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NormalizedTokenIssuanceResult"
                }
              }
            }
          },
          "401": {
            "description": "Authentication failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "STS config not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/identity/v1/user-auth-flow-config": {
      "get": {
        "tags": [
          "identity",
          "v1"
        ],
        "summary": "List user auth flow configurations",
        "description": "List all user auth flow configurations with optional filtering by type",
        "operationId": "route_list_user_auth_flow_configs",
        "parameters": [
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": [
                "integer",
                "null"
              ],
              "format": "int32",
              "minimum": 0
            },
            "example": "10"
          },
          {
            "name": "next_page_token",
            "in": "query",
            "required": false,
            "schema": {
              "type": [
                "string",
                "null"
              ]
            },
            "example": ""
          },
          {
            "name": "type",
            "in": "query",
            "description": "Filter by configuration type (oidc_authorization_code_flow, oauth_authorization_code_flow, etc.)",
            "required": false,
            "schema": {
              "type": [
                "string",
                "null"
              ]
            },
            "example": "oidc_authorization_code_flow"
          }
        ],
        "responses": {
          "200": {
            "description": "List of user auth flow configurations",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ListUserAuthFlowConfigResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "post": {
        "tags": [
          "identity",
          "v1"
        ],
        "summary": "Create user auth flow configuration",
        "description": "Create a new user auth flow configuration for OAuth/OIDC authorization flows. The configuration will be encrypted before storage.",
        "operationId": "route_create_user_auth_flow_config",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateUserAuthFlowConfigParams"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "User auth flow configuration created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateUserAuthFlowConfigResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/identity/v1/user-auth-flow-config/import": {
      "post": {
        "tags": [
          "identity",
          "v1"
        ],
        "summary": "Import user auth flow configuration",
        "description": "Import an already encrypted user auth flow configuration (idempotent, used for syncing from soma.yaml)",
        "operationId": "route_import_user_auth_flow_config",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ImportUserAuthFlowConfigParams"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "User auth flow configuration imported successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TupleUnit"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/identity/v1/user-auth-flow-config/{id}": {
      "get": {
        "tags": [
          "identity",
          "v1"
        ],
        "summary": "Get user auth flow configuration",
        "description": "Get a user auth flow configuration by ID. Returns the encrypted configuration.",
        "operationId": "route_get_user_auth_flow_config",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "ID of the user auth flow configuration to retrieve",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User auth flow configuration found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetUserAuthFlowConfigResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "User auth flow configuration not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "delete": {
        "tags": [
          "identity",
          "v1"
        ],
        "summary": "Delete user auth flow configuration",
        "description": "Delete a user auth flow configuration by ID",
        "operationId": "route_delete_user_auth_flow_config",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "ID of the user auth flow configuration to delete",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User auth flow configuration deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TupleUnit"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "User auth flow configuration not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/identity/v1/users": {
      "get": {
        "tags": [
          "identity",
          "v1"
        ],
        "summary": "List users",
        "description": "List all users with pagination and optional filtering",
        "operationId": "list-users",
        "parameters": [
          {
            "name": "page_size",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            },
            "style": "form"
          },
          {
            "name": "next_page_token",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          },
          {
            "name": "user_type",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          },
          {
            "name": "role",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          }
        ],
        "responses": {
          "200": {
            "description": "List of users",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserPaginatedResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "post": {
        "tags": [
          "identity",
          "v1"
        ],
        "summary": "Create user",
        "description": "Create a new user with the specified attributes",
        "operationId": "create-user",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateUserRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "User created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/identity/v1/users/{user_id}": {
      "get": {
        "tags": [
          "identity",
          "v1"
        ],
        "summary": "Get user",
        "description": "Retrieve a user by their unique identifier",
        "operationId": "get-user",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "description": "User ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "delete": {
        "tags": [
          "identity",
          "v1"
        ],
        "summary": "Delete user",
        "description": "Delete a user by their unique identifier",
        "operationId": "delete-user",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "description": "User ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User deleted"
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "patch": {
        "tags": [
          "identity",
          "v1"
        ],
        "summary": "Update user",
        "description": "Update a user's attributes",
        "operationId": "update-user",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "description": "User ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "User updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/identity/v1/users/{user_id}/groups": {
      "get": {
        "tags": [
          "identity",
          "v1"
        ],
        "summary": "List user groups",
        "description": "List all groups that a user belongs to",
        "operationId": "list-user-groups",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "description": "User ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page_size",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            },
            "style": "form"
          },
          {
            "name": "next_page_token",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          }
        ],
        "responses": {
          "200": {
            "description": "List of user's groups",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserGroupWithGroupPaginatedResponse"
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {},
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/tool/v1/available-tool-groups": {
      "get": {
        "tags": [
          "tool",
          "v1"
        ],
        "summary": "List tool groups",
        "description": "List all available tool group types that can be instantiated",
        "operationId": "list-available-tool-groups",
        "parameters": [
          {
            "name": "page_size",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            },
            "style": "form"
          },
          {
            "name": "next_page_token",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          }
        ],
        "responses": {
          "200": {
            "description": "List available tool groups"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/tool/v1/available-tool-groups/{tool_group_deployment_type_id}/available-credentials/{credential_deployment_type_id}": {
      "post": {
        "tags": [
          "tool",
          "v1"
        ],
        "summary": "Create tool group",
        "description": "Create a new tool group instance with the specified configuration",
        "operationId": "create-tool-group-instance",
        "parameters": [
          {
            "name": "tool_group_deployment_type_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "credential_deployment_type_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateToolGroupInstanceParamsInner"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Create tool group instance",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ToolGroupInstanceSerialized"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/tool/v1/available-tool-groups/{tool_group_deployment_type_id}/available-credentials/{credential_deployment_type_id}/credential/resource-server": {
      "post": {
        "tags": [
          "tool",
          "v1"
        ],
        "summary": "Create resource server credential",
        "description": "Create a new resource server credential",
        "operationId": "create-resource-server-credential",
        "parameters": [
          {
            "name": "tool_group_deployment_type_id",
            "in": "path",
            "description": "Tool group source type ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "credential_deployment_type_id",
            "in": "path",
            "description": "Credential source type ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateResourceServerCredentialParamsInner"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Create resource server credential",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResourceServerCredentialSerialized"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/tool/v1/available-tool-groups/{tool_group_deployment_type_id}/available-credentials/{credential_deployment_type_id}/credential/resource-server/encrypt": {
      "post": {
        "tags": [
          "tool",
          "v1"
        ],
        "summary": "Encrypt resource server config",
        "description": "Encrypt a resource server credential configuration before storage",
        "operationId": "encrypt-resource-server-configuration",
        "parameters": [
          {
            "name": "tool_group_deployment_type_id",
            "in": "path",
            "description": "Tool group source type ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "credential_deployment_type_id",
            "in": "path",
            "description": "Credential source type ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EncryptCredentialConfigurationParamsInner"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Encrypt resource server configuration",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WrappedJsonValue"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/tool/v1/available-tool-groups/{tool_group_deployment_type_id}/available-credentials/{credential_deployment_type_id}/credential/user-credential": {
      "post": {
        "tags": [
          "tool",
          "v1"
        ],
        "summary": "Create user credential",
        "description": "Create a new user credential",
        "operationId": "create-user-credential",
        "parameters": [
          {
            "name": "tool_group_deployment_type_id",
            "in": "path",
            "description": "Tool group source type ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "credential_deployment_type_id",
            "in": "path",
            "description": "Credential source type ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateUserCredentialParamsInner"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Create user credential",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserCredentialSerialized"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/tool/v1/available-tool-groups/{tool_group_deployment_type_id}/available-credentials/{credential_deployment_type_id}/credential/user-credential/broker": {
      "post": {
        "tags": [
          "tool",
          "v1"
        ],
        "summary": "Start credential brokering",
        "description": "Start the OAuth flow for user credential brokering",
        "operationId": "start-user-credential-brokering",
        "parameters": [
          {
            "name": "tool_group_deployment_type_id",
            "in": "path",
            "description": "Tool group source type ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "credential_deployment_type_id",
            "in": "path",
            "description": "Credential source type ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/StartUserCredentialBrokeringParamsInner"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Start user credential brokering",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserCredentialBrokeringResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/tool/v1/available-tool-groups/{tool_group_deployment_type_id}/available-credentials/{credential_deployment_type_id}/credential/user-credential/encrypt": {
      "post": {
        "tags": [
          "tool",
          "v1"
        ],
        "summary": "Encrypt user credential config",
        "description": "Encrypt a user credential configuration before storage",
        "operationId": "encrypt-user-credential-configuration",
        "parameters": [
          {
            "name": "tool_group_deployment_type_id",
            "in": "path",
            "description": "Tool group source type ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "credential_deployment_type_id",
            "in": "path",
            "description": "Credential source type ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EncryptCredentialConfigurationParamsInner"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Encrypt user credential configuration",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WrappedJsonValue"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/tool/v1/generic-oauth-callback": {
      "get": {
        "tags": [
          "tool",
          "v1"
        ],
        "summary": "OAuth callback",
        "description": "Handle OAuth callback to complete user credential brokering flow",
        "operationId": "resume-user-credential-brokering",
        "parameters": [
          {
            "name": "state",
            "in": "query",
            "description": "OAuth state parameter",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "code",
            "in": "query",
            "description": "OAuth authorization code",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "error",
            "in": "query",
            "description": "OAuth error code",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "error_description",
            "in": "query",
            "description": "OAuth error description",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Generic OAuth callback",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserCredentialBrokeringResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/tool/v1/mcp-server": {
      "get": {
        "tags": [
          "tool",
          "v1"
        ],
        "summary": "List MCP server instances",
        "description": "List all MCP server instances with pagination",
        "operationId": "list-mcp-server-instances",
        "parameters": [
          {
            "name": "page_size",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            },
            "style": "form"
          },
          {
            "name": "next_page_token",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          }
        ],
        "responses": {
          "200": {
            "description": "List MCP server instances",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/McpServerInstanceSerializedWithFunctionsPaginatedResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "post": {
        "tags": [
          "tool",
          "v1"
        ],
        "summary": "Create MCP server instance",
        "description": "Create a new MCP server instance with a user-provided ID",
        "operationId": "create-mcp-server-instance",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateMcpServerInstanceRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Create MCP server instance",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/McpServerInstanceSerializedWithFunctions"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/tool/v1/mcp-server/{mcp_server_instance_id}": {
      "get": {
        "tags": [
          "tool",
          "v1"
        ],
        "summary": "Get MCP server instance",
        "description": "Retrieve an MCP server instance by its ID",
        "operationId": "get-mcp-server-instance",
        "parameters": [
          {
            "name": "mcp_server_instance_id",
            "in": "path",
            "description": "MCP server instance ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Get MCP server instance",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/McpServerInstanceSerializedWithFunctions"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "delete": {
        "tags": [
          "tool",
          "v1"
        ],
        "summary": "Delete MCP server instance",
        "description": "Delete an MCP server instance and all its function mappings",
        "operationId": "delete-mcp-server-instance",
        "parameters": [
          {
            "name": "mcp_server_instance_id",
            "in": "path",
            "description": "MCP server instance ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Delete MCP server instance"
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "patch": {
        "tags": [
          "tool",
          "v1"
        ],
        "summary": "Update MCP server instance",
        "description": "Update an MCP server instance name",
        "operationId": "update-mcp-server-instance",
        "parameters": [
          {
            "name": "mcp_server_instance_id",
            "in": "path",
            "description": "MCP server instance ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateMcpServerInstanceRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Update MCP server instance",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/McpServerInstanceSerializedWithFunctions"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/tool/v1/mcp-server/{mcp_server_instance_id}/function": {
      "post": {
        "tags": [
          "tool",
          "v1"
        ],
        "summary": "Add function to MCP server instance",
        "description": "Add a function mapping to an MCP server instance with a custom name",
        "operationId": "add-mcp-server-instance-function",
        "parameters": [
          {
            "name": "mcp_server_instance_id",
            "in": "path",
            "description": "MCP server instance ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddMcpServerInstanceFunctionRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Add function to MCP server instance",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/McpServerInstanceSerializedWithFunctions"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "409": {
            "description": "Conflict (function name already exists)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/tool/v1/mcp-server/{mcp_server_instance_id}/function/{tool_deployment_type_id}/{tool_group_deployment_type_id}/{tool_group_instance_id}": {
      "delete": {
        "tags": [
          "tool",
          "v1"
        ],
        "summary": "Remove function from MCP server instance",
        "description": "Remove a function mapping from an MCP server instance",
        "operationId": "remove-mcp-server-instance-function",
        "parameters": [
          {
            "name": "mcp_server_instance_id",
            "in": "path",
            "description": "MCP server instance ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "tool_deployment_type_id",
            "in": "path",
            "description": "Tool source type ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "tool_group_deployment_type_id",
            "in": "path",
            "description": "Tool group source type ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "tool_group_instance_id",
            "in": "path",
            "description": "Provider instance ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Remove function from MCP server instance",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/McpServerInstanceSerializedWithFunctions"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "patch": {
        "tags": [
          "tool",
          "v1"
        ],
        "summary": "Update function in MCP server instance",
        "description": "Update the function name and description for a function mapping",
        "operationId": "update-mcp-server-instance-function",
        "parameters": [
          {
            "name": "mcp_server_instance_id",
            "in": "path",
            "description": "MCP server instance ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "tool_deployment_type_id",
            "in": "path",
            "description": "Tool source type ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "tool_group_deployment_type_id",
            "in": "path",
            "description": "Tool group source type ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "tool_group_instance_id",
            "in": "path",
            "description": "Provider instance ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateMcpServerInstanceFunctionRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Update function in MCP server instance",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/McpServerInstanceSerializedWithFunctions"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "409": {
            "description": "Conflict (function name already exists)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/tool/v1/tool": {
      "get": {
        "tags": [
          "tool"
        ],
        "summary": "List tools",
        "description": "Returns a paginated list of registered tools, optionally filtered by endpoint type and category",
        "operationId": "list-tools",
        "parameters": [
          {
            "name": "page_size",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            },
            "style": "form"
          },
          {
            "name": "next_page_token",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          },
          {
            "name": "endpoint_type",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          },
          {
            "name": "category",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          }
        ],
        "responses": {
          "200": {
            "description": "List of tools"
          },
          "400": {
            "description": "Invalid request"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      },
      "post": {
        "tags": [
          "tool"
        ],
        "summary": "Register tool",
        "description": "Register a new HTTP-based tool with encrypted invocation key",
        "operationId": "register-tool",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterToolRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Tool registered successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegisterToolResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/tool/v1/tool-alias": {
      "get": {
        "tags": [
          "tool"
        ],
        "summary": "List tool aliases",
        "description": "Returns a paginated list of tool aliases, optionally filtered by tool",
        "operationId": "list-tool-aliases",
        "parameters": [
          {
            "name": "page_size",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            },
            "style": "form"
          },
          {
            "name": "next_page_token",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          },
          {
            "name": "tool_type_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          },
          {
            "name": "tool_deployment_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          }
        ],
        "responses": {
          "200": {
            "description": "List of aliases"
          },
          "400": {
            "description": "Invalid request"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      },
      "post": {
        "tags": [
          "tool"
        ],
        "summary": "Create tool alias",
        "description": "Creates an alias that points to a specific tool deployment",
        "operationId": "create-tool-alias",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateToolAliasRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Alias created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateToolAliasResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request"
          },
          "409": {
            "description": "Alias already exists"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/tool/v1/tool-alias/{alias}": {
      "get": {
        "tags": [
          "tool"
        ],
        "summary": "Get tool by alias",
        "description": "Resolves an alias and returns the tool it points to",
        "operationId": "get-tool-by-alias",
        "parameters": [
          {
            "name": "alias",
            "in": "path",
            "description": "Tool alias (e.g., 'latest', 'stable')",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Tool details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ToolSerialized"
                }
              }
            }
          },
          "404": {
            "description": "Alias not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      },
      "delete": {
        "tags": [
          "tool"
        ],
        "summary": "Delete tool alias",
        "description": "Removes an alias (does not delete the tool itself)",
        "operationId": "delete-tool-alias",
        "parameters": [
          {
            "name": "alias",
            "in": "path",
            "description": "Alias to delete",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Alias deleted successfully"
          },
          "404": {
            "description": "Alias not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/tool/v1/tool-alias/{tool_type_id}/{alias}": {
      "put": {
        "tags": [
          "tool"
        ],
        "summary": "Update tool alias",
        "description": "Updates an alias to point to a different deployment",
        "operationId": "update-tool-alias",
        "parameters": [
          {
            "name": "tool_type_id",
            "in": "path",
            "description": "Tool type identifier",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "alias",
            "in": "path",
            "description": "Alias to update",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateToolAliasRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "204": {
            "description": "Alias updated successfully"
          },
          "404": {
            "description": "Alias not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/tool/v1/tool-group": {
      "get": {
        "tags": [
          "tool",
          "v1"
        ],
        "summary": "List tool group instances",
        "description": "List all tool group instances with optional filtering by status and tool group type",
        "operationId": "list-tool-group-instances",
        "parameters": [
          {
            "name": "page_size",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            },
            "style": "form"
          },
          {
            "name": "next_page_token",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          },
          {
            "name": "tool_group_deployment_type_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          }
        ],
        "responses": {
          "200": {
            "description": "List tool group instances",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ToolGroupInstanceListItemPaginatedResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/tool/v1/tool-group/grouped-by-function": {
      "get": {
        "tags": [
          "tool",
          "v1"
        ],
        "summary": "List tool groups by function",
        "description": "List tool group instances grouped by their associated functions",
        "operationId": "list-tool-group-instances-grouped-by-function",
        "parameters": [
          {
            "name": "next_page_token",
            "in": "query",
            "required": false,
            "schema": {
              "type": [
                "string",
                "null"
              ]
            }
          },
          {
            "name": "page_size",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "tool_group_deployment_type_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": [
                "string",
                "null"
              ]
            }
          },
          {
            "name": "function_category",
            "in": "query",
            "required": false,
            "schema": {
              "type": [
                "string",
                "null"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List tool group instances grouped by function",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ToolInstanceConfigPaginatedResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/tool/v1/tool-group/{tool_group_instance_id}": {
      "get": {
        "tags": [
          "tool",
          "v1"
        ],
        "summary": "Get tool group",
        "description": "Retrieve a tool group instance by its unique identifier",
        "operationId": "get-tool-group-instance",
        "parameters": [
          {
            "name": "tool_group_instance_id",
            "in": "path",
            "description": "Tool group instance ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Get tool group instance",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ToolGroupInstanceSerializedWithEverything"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "delete": {
        "tags": [
          "tool",
          "v1"
        ],
        "summary": "Delete tool group",
        "description": "Delete a tool group instance by its unique identifier",
        "operationId": "delete-tool-group-instance",
        "parameters": [
          {
            "name": "tool_group_instance_id",
            "in": "path",
            "description": "Tool group instance ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Delete tool group instance",
            "content": {
              "application/json": {
                "schema": {
                  "default": null
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      },
      "patch": {
        "tags": [
          "tool",
          "v1"
        ],
        "summary": "Update tool group",
        "description": "Update an existing tool group instance configuration",
        "operationId": "update-tool-group-instance",
        "parameters": [
          {
            "name": "tool_group_instance_id",
            "in": "path",
            "description": "Tool group instance ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateToolGroupInstanceParamsInner"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Update tool group instance",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TupleUnit"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/tool/v1/tool-group/{tool_group_instance_id}/tool/{tool_deployment_type_id}/disable": {
      "post": {
        "tags": [
          "tool",
          "v1"
        ],
        "summary": "Disable tool",
        "description": "Disable a tool for a tool group instance",
        "operationId": "disable-tool",
        "parameters": [
          {
            "name": "tool_group_instance_id",
            "in": "path",
            "description": "Tool group instance ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "tool_deployment_type_id",
            "in": "path",
            "description": "Tool source type ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Disable tool",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TupleUnit"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/tool/v1/tool-group/{tool_group_instance_id}/tool/{tool_deployment_type_id}/enable": {
      "post": {
        "tags": [
          "tool",
          "v1"
        ],
        "summary": "Enable tool",
        "description": "Enable a tool for a tool group instance",
        "operationId": "enable-tool",
        "parameters": [
          {
            "name": "tool_group_instance_id",
            "in": "path",
            "description": "Tool group instance ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "tool_deployment_type_id",
            "in": "path",
            "description": "Tool source type ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EnableToolParamsInner"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Enable tool",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ToolInstanceSerialized"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/tool/v1/tool-group/{tool_group_instance_id}/tool/{tool_deployment_type_id}/invoke": {
      "post": {
        "tags": [
          "tool",
          "v1"
        ],
        "summary": "Invoke tool",
        "description": "Invoke a tool on a tool group instance",
        "operationId": "invoke-tool",
        "parameters": [
          {
            "name": "tool_group_instance_id",
            "in": "path",
            "description": "Tool group instance ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "tool_deployment_type_id",
            "in": "path",
            "description": "Tool source type ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/InvokeToolParamsInner"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Invoke tool",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InvokeResult"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/tool/v1/tool-instances": {
      "get": {
        "tags": [
          "tool",
          "v1"
        ],
        "summary": "List tool instances",
        "description": "List all tool instances with optional filtering by tool group instance",
        "operationId": "list-tool-instances",
        "parameters": [
          {
            "name": "page_size",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            },
            "style": "form"
          },
          {
            "name": "next_page_token",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          },
          {
            "name": "tool_group_instance_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          }
        ],
        "responses": {
          "200": {
            "description": "List tool instances",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ToolInstanceSerializedPaginatedResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/tool/v1/tool-instances/openapi.json": {
      "get": {
        "tags": [
          "tool",
          "v1"
        ],
        "summary": "Get tool OpenAPI spec",
        "description": "Get the OpenAPI specification for all tool instances",
        "operationId": "get-tool-instances-openapi-spec",
        "responses": {
          "200": {
            "description": "Get tool instances openapi spec",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          },
          {
            "bearer_token": []
          }
        ]
      }
    },
    "/api/tool/v1/tool/type/{type_id}/deployment/{deployment_id}": {
      "get": {
        "tags": [
          "tool"
        ],
        "summary": "Get tool",
        "description": "Returns tool details including encrypted endpoint configuration",
        "operationId": "get-tool",
        "parameters": [
          {
            "name": "type_id",
            "in": "path",
            "description": "Tool type identifier",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "deployment_id",
            "in": "path",
            "description": "Tool deployment identifier",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Tool details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ToolSerialized"
                }
              }
            }
          },
          "404": {
            "description": "Tool not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      },
      "delete": {
        "tags": [
          "tool"
        ],
        "summary": "Deregister tool",
        "description": "Removes a tool registration and all its aliases",
        "operationId": "deregister-tool",
        "parameters": [
          {
            "name": "type_id",
            "in": "path",
            "description": "Tool type identifier",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "deployment_id",
            "in": "path",
            "description": "Tool deployment identifier",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Tool deregistered successfully"
          },
          "404": {
            "description": "Tool not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AddGroupMemberRequest": {
        "type": "object",
        "required": [
          "user_id"
        ],
        "properties": {
          "user_id": {
            "type": "string",
            "description": "User ID to add to the group"
          }
        }
      },
      "AddMcpServerInstanceFunctionRequest": {
        "type": "object",
        "required": [
          "tool_deployment_type_id",
          "tool_group_deployment_type_id",
          "tool_group_instance_id",
          "tool_name"
        ],
        "properties": {
          "tool_deployment_type_id": {
            "type": "string"
          },
          "tool_description": {
            "type": [
              "string",
              "null"
            ]
          },
          "tool_group_deployment_type_id": {
            "type": "string"
          },
          "tool_group_instance_id": {
            "type": "string"
          },
          "tool_name": {
            "type": "string"
          }
        }
      },
      "BrokerAction": {
        "oneOf": [
          {
            "type": "object",
            "required": [
              "Redirect"
            ],
            "properties": {
              "Redirect": {
                "$ref": "#/components/schemas/BrokerActionRedirect"
              }
            }
          },
          {
            "type": "string",
            "enum": [
              "None"
            ]
          }
        ]
      },
      "BrokerActionRedirect": {
        "type": "object",
        "required": [
          "url"
        ],
        "properties": {
          "url": {
            "type": "string"
          }
        }
      },
      "BrokerState": {
        "type": "object",
        "required": [
          "id",
          "created_at",
          "updated_at",
          "tool_group_instance_id",
          "tool_group_deployment_type_id",
          "credential_deployment_type_id",
          "metadata",
          "action"
        ],
        "properties": {
          "action": {
            "$ref": "#/components/schemas/BrokerAction"
          },
          "created_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          },
          "credential_deployment_type_id": {
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "metadata": {
            "$ref": "#/components/schemas/Metadata"
          },
          "tool_group_deployment_type_id": {
            "type": "string"
          },
          "tool_group_instance_id": {
            "type": "string"
          },
          "updated_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          }
        }
      },
      "ConfigurationSchema": {
        "type": "object",
        "required": [
          "resource_server",
          "user_credential"
        ],
        "properties": {
          "resource_server": {
            "$ref": "#/components/schemas/JsonSchema"
          },
          "user_credential": {
            "$ref": "#/components/schemas/JsonSchema"
          }
        }
      },
      "CreateApiKeyParams": {
        "type": "object",
        "description": "Parameters for creating an API key",
        "required": [
          "id",
          "role"
        ],
        "properties": {
          "description": {
            "type": [
              "string",
              "null"
            ],
            "description": "Description of the API key"
          },
          "id": {
            "type": "string",
            "description": "The ID for this API key"
          },
          "role": {
            "$ref": "#/components/schemas/Role",
            "description": "Role to assign to the API key's user"
          }
        }
      },
      "CreateApiKeyResponse": {
        "type": "object",
        "description": "Response from creating an API key",
        "required": [
          "id",
          "api_key"
        ],
        "properties": {
          "api_key": {
            "type": "string",
            "description": "The raw API key value (only returned once, not stored)"
          },
          "id": {
            "type": "string",
            "description": "The API key ID"
          }
        }
      },
      "CreateDataEncryptionKeyParamsRoute": {
        "type": "object",
        "properties": {
          "encrypted_dek": {
            "type": [
              "string",
              "null"
            ]
          },
          "id": {
            "type": [
              "string",
              "null"
            ]
          }
        }
      },
      "CreateDekAliasRequest": {
        "type": "object",
        "required": [
          "dek_id",
          "alias"
        ],
        "properties": {
          "alias": {
            "type": "string"
          },
          "dek_id": {
            "type": "string"
          }
        }
      },
      "CreateGroupRequest": {
        "type": "object",
        "required": [
          "name"
        ],
        "properties": {
          "id": {
            "type": [
              "string",
              "null"
            ],
            "description": "Group ID (if not provided, a UUID will be generated)"
          },
          "name": {
            "type": "string",
            "description": "Group name"
          }
        }
      },
      "CreateMcpServerInstanceRequest": {
        "type": "object",
        "required": [
          "id",
          "name"
        ],
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          }
        }
      },
      "CreateResourceServerCredentialParamsInner": {
        "type": "object",
        "required": [
          "resource_server_configuration",
          "dek_alias"
        ],
        "properties": {
          "dek_alias": {
            "type": "string"
          },
          "metadata": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/Metadata"
              }
            ]
          },
          "resource_server_configuration": {
            "$ref": "#/components/schemas/WrappedJsonValue"
          }
        }
      },
      "CreateSecretRequest": {
        "type": "object",
        "description": "Request to create a new secret",
        "required": [
          "key",
          "raw_value",
          "dek_alias"
        ],
        "properties": {
          "dek_alias": {
            "type": "string"
          },
          "key": {
            "type": "string"
          },
          "raw_value": {
            "type": "string"
          }
        }
      },
      "CreateToolAliasRequest": {
        "type": "object",
        "required": [
          "tool_type_id",
          "tool_deployment_id",
          "alias"
        ],
        "properties": {
          "alias": {
            "type": "string"
          },
          "tool_deployment_id": {
            "type": "string"
          },
          "tool_type_id": {
            "type": "string"
          }
        }
      },
      "CreateToolAliasResponse": {
        "type": "object",
        "required": [
          "tool_alias"
        ],
        "properties": {
          "tool_alias": {
            "$ref": "#/components/schemas/ToolAliasSerialized"
          }
        }
      },
      "CreateToolGroupInstanceParamsInner": {
        "type": "object",
        "required": [
          "resource_server_credential_id",
          "display_name"
        ],
        "properties": {
          "display_name": {
            "type": "string"
          },
          "resource_server_credential_id": {
            "$ref": "#/components/schemas/WrappedUuidV4"
          },
          "return_on_successful_brokering": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/ReturnAddress"
              }
            ]
          },
          "tool_group_instance_id": {
            "type": [
              "string",
              "null"
            ]
          },
          "user_credential_id": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/WrappedUuidV4"
              }
            ]
          }
        }
      },
      "CreateUserAuthFlowConfigParams": {
        "type": "object",
        "description": "Parameters for creating a user auth flow configuration",
        "required": [
          "config"
        ],
        "properties": {
          "config": {
            "$ref": "#/components/schemas/UserAuthFlowConfig",
            "description": "The configuration to create (unencrypted)"
          }
        }
      },
      "CreateUserAuthFlowConfigResponse": {
        "type": "object",
        "description": "Response from creating a user auth flow configuration",
        "required": [
          "id"
        ],
        "properties": {
          "id": {
            "type": "string",
            "description": "The ID of the created configuration"
          }
        }
      },
      "CreateUserCredentialParamsInner": {
        "type": "object",
        "required": [
          "user_credential_configuration",
          "dek_alias"
        ],
        "properties": {
          "dek_alias": {
            "type": "string"
          },
          "metadata": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/Metadata"
              }
            ]
          },
          "user_credential_configuration": {
            "$ref": "#/components/schemas/WrappedJsonValue"
          }
        }
      },
      "CreateUserRequest": {
        "type": "object",
        "required": [
          "user_type",
          "role"
        ],
        "properties": {
          "email": {
            "type": [
              "string",
              "null"
            ],
            "description": "User's email address"
          },
          "id": {
            "type": [
              "string",
              "null"
            ],
            "description": "User ID (if not provided, a UUID will be generated)"
          },
          "role": {
            "type": "string",
            "description": "User's role"
          },
          "user_type": {
            "type": "string",
            "description": "User type: \"service_principal\" or \"federated_user\""
          }
        }
      },
      "CreateVariableRequest": {
        "type": "object",
        "description": "Request to create a new variable",
        "required": [
          "key",
          "value"
        ],
        "properties": {
          "key": {
            "type": "string"
          },
          "value": {
            "type": "string"
          }
        }
      },
      "DataEncryptionKey": {
        "type": "object",
        "required": [
          "id",
          "envelope_encryption_key_id",
          "encrypted_data_encryption_key",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "created_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          },
          "encrypted_data_encryption_key": {
            "$ref": "#/components/schemas/EncryptedDataEncryptionKey"
          },
          "envelope_encryption_key_id": {
            "$ref": "#/components/schemas/EnvelopeEncryptionKey"
          },
          "id": {
            "type": "string"
          },
          "updated_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          }
        }
      },
      "DataEncryptionKeyAlias": {
        "type": "object",
        "description": "Data encryption key alias struct",
        "required": [
          "alias",
          "data_encryption_key_id",
          "created_at"
        ],
        "properties": {
          "alias": {
            "type": "string"
          },
          "created_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          },
          "data_encryption_key_id": {
            "type": "string"
          }
        }
      },
      "DataEncryptionKeyListItem": {
        "type": "object",
        "required": [
          "id",
          "envelope_encryption_key_id",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "created_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          },
          "envelope_encryption_key_id": {
            "$ref": "#/components/schemas/EnvelopeEncryptionKey"
          },
          "id": {
            "type": "string"
          },
          "updated_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          }
        }
      },
      "DataEncryptionKeyListItemPaginatedResponse": {
        "type": "object",
        "required": [
          "items"
        ],
        "properties": {
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DataEncryptionKeyListItem"
            }
          },
          "next_page_token": {
            "type": "string"
          }
        }
      },
      "DecryptedSecret": {
        "type": "object",
        "description": "Decrypted secret type for list-decrypted endpoint",
        "required": [
          "id",
          "key",
          "decrypted_value",
          "dek_alias",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "created_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          },
          "decrypted_value": {
            "type": "string"
          },
          "dek_alias": {
            "type": "string"
          },
          "id": {
            "$ref": "#/components/schemas/WrappedUuidV4"
          },
          "key": {
            "type": "string"
          },
          "updated_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          }
        }
      },
      "DeleteSecretResponse": {
        "type": "object",
        "description": "Response for deleting a secret",
        "required": [
          "success"
        ],
        "properties": {
          "success": {
            "type": "boolean"
          }
        }
      },
      "DeleteVariableResponse": {
        "type": "object",
        "description": "Response for deleting a variable",
        "required": [
          "success"
        ],
        "properties": {
          "success": {
            "type": "boolean"
          }
        }
      },
      "DevModeConfig": {
        "type": "object",
        "required": [
          "id"
        ],
        "properties": {
          "id": {
            "$ref": "#/components/schemas/String"
          }
        }
      },
      "EnableToolParamsInner": {
        "type": "object"
      },
      "EncryptCredentialConfigurationParamsInner": {
        "type": "object",
        "description": "Parameters for encrypting credential configuration.\nUses dek_alias to look up the DEK to use for encryption.",
        "required": [
          "value",
          "dek_alias"
        ],
        "properties": {
          "dek_alias": {
            "type": "string",
            "description": "The DEK alias to use for encryption (resolved to actual DEK id internally)"
          },
          "value": {
            "$ref": "#/components/schemas/WrappedJsonValue",
            "description": "The raw credential configuration value to encrypt"
          }
        }
      },
      "EncryptedApiKeyConfig": {
        "type": "object",
        "description": "Parameters for importing an API key",
        "required": [
          "id",
          "encrypted_hashed_value",
          "dek_alias",
          "role",
          "user_id"
        ],
        "properties": {
          "dek_alias": {
            "type": "string",
            "description": "The DEK alias used for encryption"
          },
          "description": {
            "type": [
              "string",
              "null"
            ],
            "description": "Description of the API key"
          },
          "encrypted_hashed_value": {
            "type": "string",
            "description": "The encrypted hashed value of the API key"
          },
          "id": {
            "type": "string",
            "description": "The ID of the API key"
          },
          "role": {
            "$ref": "#/components/schemas/Role",
            "description": "Role to assign to the API key's user"
          },
          "user_id": {
            "type": "string",
            "description": "The user ID for this API key"
          }
        }
      },
      "EncryptedDataEncryptionKey": {
        "type": "string"
      },
      "EncryptedOauthConfig": {
        "type": "object",
        "description": "OAuth2 configuration for authorization code flow",
        "required": [
          "id",
          "authorization_endpoint",
          "token_endpoint",
          "jwks_endpoint",
          "client_id",
          "encrypted_client_secret",
          "dek_alias",
          "scopes",
          "mapping"
        ],
        "properties": {
          "authorization_endpoint": {
            "type": "string"
          },
          "client_id": {
            "type": "string"
          },
          "dek_alias": {
            "type": "string"
          },
          "encrypted_client_secret": {
            "$ref": "#/components/schemas/EncryptedString"
          },
          "id": {
            "type": "string"
          },
          "introspect_url": {
            "type": [
              "string",
              "null"
            ],
            "description": "Token introspection endpoint URL (RFC 7662)"
          },
          "jwks_endpoint": {
            "type": "string"
          },
          "mapping": {
            "$ref": "#/components/schemas/TokenMapping"
          },
          "scopes": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "token_endpoint": {
            "type": "string"
          }
        }
      },
      "EncryptedOidcConfig": {
        "type": "object",
        "description": "OIDC configuration extending OAuth2 with discovery and ID token support",
        "required": [
          "id",
          "base_config",
          "mapping"
        ],
        "properties": {
          "base_config": {
            "$ref": "#/components/schemas/EncryptedOauthConfig"
          },
          "discovery_endpoint": {
            "type": [
              "string",
              "null"
            ]
          },
          "id": {
            "type": "string"
          },
          "introspect_url": {
            "type": [
              "string",
              "null"
            ],
            "description": "Token introspection endpoint URL (RFC 7662)"
          },
          "mapping": {
            "$ref": "#/components/schemas/TokenMapping"
          },
          "userinfo_endpoint": {
            "type": [
              "string",
              "null"
            ]
          }
        }
      },
      "EncryptedString": {
        "type": "string"
      },
      "EncryptedUserAuthFlowConfig": {
        "oneOf": [
          {
            "type": "object",
            "required": [
              "oidc_authorization_code_flow"
            ],
            "properties": {
              "oidc_authorization_code_flow": {
                "$ref": "#/components/schemas/EncryptedOidcConfig"
              }
            }
          },
          {
            "type": "object",
            "required": [
              "oauth_authorization_code_flow"
            ],
            "properties": {
              "oauth_authorization_code_flow": {
                "$ref": "#/components/schemas/EncryptedOauthConfig"
              }
            }
          },
          {
            "type": "object",
            "required": [
              "oidc_authorization_code_pkce_flow"
            ],
            "properties": {
              "oidc_authorization_code_pkce_flow": {
                "$ref": "#/components/schemas/EncryptedOidcConfig"
              }
            }
          },
          {
            "type": "object",
            "required": [
              "oauth_authorization_code_pkce_flow"
            ],
            "properties": {
              "oauth_authorization_code_pkce_flow": {
                "$ref": "#/components/schemas/EncryptedOauthConfig"
              }
            }
          }
        ]
      },
      "EndpointType": {
        "type": "string",
        "description": "Type of endpoint for tool execution",
        "enum": [
          "http"
        ]
      },
      "EnvelopeEncryptionKey": {
        "oneOf": [
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/EnvelopeEncryptionKeyAwsKms"
              },
              {
                "type": "object",
                "required": [
                  "type"
                ],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "aws_kms"
                    ]
                  }
                }
              }
            ]
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/EnvelopeEncryptionKeyLocal"
              },
              {
                "type": "object",
                "required": [
                  "type"
                ],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "local"
                    ]
                  }
                }
              }
            ]
          }
        ]
      },
      "EnvelopeEncryptionKeyAwsKms": {
        "type": "object",
        "required": [
          "arn",
          "region"
        ],
        "properties": {
          "arn": {
            "type": "string"
          },
          "region": {
            "type": "string"
          }
        }
      },
      "EnvelopeEncryptionKeyLocal": {
        "type": "object",
        "required": [
          "file_name"
        ],
        "properties": {
          "file_name": {
            "type": "string"
          }
        }
      },
      "EnvelopeEncryptionKeyPaginatedResponse": {
        "type": "object",
        "required": [
          "items"
        ],
        "properties": {
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/EnvelopeEncryptionKey"
            }
          },
          "next_page_token": {
            "type": "string"
          }
        }
      },
      "Error": {
        "type": "object",
        "required": [
          "name",
          "message"
        ],
        "properties": {
          "message": {
            "type": "string"
          },
          "name": {
            "type": "string"
          }
        }
      },
      "GetUserAuthFlowConfigResponse": {
        "type": "object",
        "description": "Response from getting a user auth flow configuration",
        "required": [
          "config",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "config": {
            "$ref": "#/components/schemas/EncryptedUserAuthFlowConfig",
            "description": "The configuration (encrypted)"
          },
          "created_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime",
            "description": "When the configuration was created"
          },
          "updated_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime",
            "description": "When the configuration was last updated"
          }
        }
      },
      "Group": {
        "type": "object",
        "description": "A group entity for organizing users and managing access control.\n\nGroups allow assigning permissions to multiple users at once.",
        "required": [
          "id",
          "name",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "created_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime",
            "description": "Timestamp when the group was created (UTC)"
          },
          "id": {
            "type": "string",
            "description": "Unique identifier (UUID format)"
          },
          "name": {
            "type": "string",
            "description": "Human-readable group name"
          },
          "updated_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime",
            "description": "Timestamp when the group was last modified (UTC)"
          }
        }
      },
      "GroupMemberWithUser": {
        "type": "object",
        "required": [
          "membership",
          "user"
        ],
        "properties": {
          "membership": {
            "$ref": "#/components/schemas/GroupMembership"
          },
          "user": {
            "$ref": "#/components/schemas/User"
          }
        }
      },
      "GroupMemberWithUserPaginatedResponse": {
        "type": "object",
        "required": [
          "items"
        ],
        "properties": {
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/GroupMemberWithUser"
            }
          },
          "next_page_token": {
            "type": "string"
          }
        }
      },
      "GroupMembership": {
        "type": "object",
        "required": [
          "group_id",
          "user_id",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "created_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          },
          "group_id": {
            "type": "string"
          },
          "updated_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          },
          "user_id": {
            "type": "string"
          }
        }
      },
      "GroupPaginatedResponse": {
        "type": "object",
        "required": [
          "items"
        ],
        "properties": {
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Group"
            }
          },
          "next_page_token": {
            "type": "string"
          }
        }
      },
      "GroupToRoleMapping": {
        "type": "object",
        "required": [
          "group",
          "role"
        ],
        "properties": {
          "group": {
            "type": "string"
          },
          "role": {
            "$ref": "#/components/schemas/Role"
          }
        }
      },
      "HashedApiKey": {
        "type": "object",
        "required": [
          "id",
          "hashed_value",
          "user_id",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "created_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          },
          "description": {
            "type": [
              "string",
              "null"
            ]
          },
          "hashed_value": {
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "updated_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          },
          "user_id": {
            "type": "string"
          }
        }
      },
      "HealthCheckResponse": {
        "type": "object",
        "required": [
          "status"
        ],
        "properties": {
          "status": {
            "type": "string"
          }
        }
      },
      "HttpEndpointConfiguration": {
        "type": "object",
        "description": "Configuration for HTTP-based tool endpoints",
        "required": [
          "url",
          "invocation_key"
        ],
        "properties": {
          "invocation_key": {
            "type": "string",
            "description": "Encrypted invocation key used for authentication"
          },
          "url": {
            "type": "string",
            "description": "URL of the HTTP endpoint"
          }
        }
      },
      "Human": {
        "type": "object",
        "description": "Authenticated human identity.\n\nRepresents a real user that authenticated via STS/OAuth token.",
        "required": [
          "sub",
          "groups",
          "role"
        ],
        "properties": {
          "email": {
            "type": [
              "string",
              "null"
            ],
            "description": "Email address of the user (if available from token)"
          },
          "groups": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Group IDs the user belongs to"
          },
          "role": {
            "$ref": "#/components/schemas/Role",
            "description": "Permission level of this user"
          },
          "sub": {
            "type": "string",
            "description": "Subject identifier (user ID) of the human user"
          }
        }
      },
      "Identity": {
        "oneOf": [
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/Machine",
                "description": "Machine identity (API key authentication)"
              },
              {
                "type": "object",
                "required": [
                  "type"
                ],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "machine"
                    ]
                  }
                }
              }
            ],
            "description": "Machine identity (API key authentication)"
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/Human",
                "description": "Human identity (STS token authentication)"
              },
              {
                "type": "object",
                "required": [
                  "type"
                ],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "human"
                    ]
                  }
                }
              }
            ],
            "description": "Human identity (STS token authentication)"
          },
          {
            "type": "object",
            "description": "Machine acting on behalf of a human (both credentials provided)",
            "required": [
              "machine",
              "human",
              "type"
            ],
            "properties": {
              "human": {
                "$ref": "#/components/schemas/Human"
              },
              "machine": {
                "$ref": "#/components/schemas/Machine"
              },
              "type": {
                "type": "string",
                "enum": [
                  "machine_on_behalf_of_human"
                ]
              }
            }
          },
          {
            "type": "object",
            "description": "Unauthenticated request (no valid credentials)",
            "required": [
              "type"
            ],
            "properties": {
              "type": {
                "type": "string",
                "enum": [
                  "unauthenticated"
                ]
              }
            }
          }
        ],
        "description": "Authenticated identity representing the caller of a request.\n\nThis is the result of authentication and is used throughout the system\nfor authorization decisions."
      },
      "ImportDataEncryptionKeyParamsRoute": {
        "type": "object",
        "required": [
          "encrypted_data_encryption_key"
        ],
        "properties": {
          "encrypted_data_encryption_key": {
            "type": "string"
          },
          "id": {
            "type": [
              "string",
              "null"
            ]
          }
        }
      },
      "ImportSecretRequest": {
        "type": "object",
        "description": "Request type for importing pre-encrypted secrets (used by sync_yaml_to_api_on_start)",
        "required": [
          "key",
          "encrypted_value",
          "dek_alias"
        ],
        "properties": {
          "dek_alias": {
            "type": "string"
          },
          "encrypted_value": {
            "type": "string"
          },
          "key": {
            "type": "string"
          }
        }
      },
      "ImportUserAuthFlowConfigParams": {
        "type": "object",
        "description": "Parameters for importing a user auth flow configuration (already encrypted)",
        "required": [
          "config"
        ],
        "properties": {
          "config": {
            "$ref": "#/components/schemas/EncryptedUserAuthFlowConfig",
            "description": "The encrypted configuration to import"
          }
        }
      },
      "ImportVariableRequest": {
        "type": "object",
        "description": "Request type for importing variables (used by sync_yaml_to_api_on_start)",
        "required": [
          "key",
          "value"
        ],
        "properties": {
          "key": {
            "type": "string"
          },
          "value": {
            "type": "string"
          }
        }
      },
      "InvokeError": {
        "type": "object",
        "required": [
          "message"
        ],
        "properties": {
          "message": {
            "type": "string"
          }
        }
      },
      "InvokeResult": {
        "oneOf": [
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/WrappedJsonValue"
              },
              {
                "type": "object",
                "required": [
                  "type"
                ],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "success"
                    ]
                  }
                }
              }
            ]
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/InvokeError"
              },
              {
                "type": "object",
                "required": [
                  "type"
                ],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "error"
                    ]
                  }
                }
              }
            ]
          }
        ]
      },
      "InvokeToolParamsInner": {
        "type": "object",
        "required": [
          "params"
        ],
        "properties": {
          "params": {
            "$ref": "#/components/schemas/WrappedJsonValue"
          }
        }
      },
      "JsonSchema": {
        "type": "object",
        "additionalProperties": true
      },
      "Jwk": {
        "type": "object",
        "required": [
          "kty",
          "kid",
          "use",
          "alg",
          "n",
          "e"
        ],
        "properties": {
          "alg": {
            "type": "string"
          },
          "e": {
            "type": "string"
          },
          "kid": {
            "type": "string"
          },
          "kty": {
            "type": "string"
          },
          "n": {
            "type": "string"
          },
          "use": {
            "type": "string"
          }
        }
      },
      "JwkResponse": {
        "type": "object",
        "required": [
          "kid",
          "publicKey",
          "expiresAt",
          "createdAt"
        ],
        "properties": {
          "createdAt": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          },
          "expiresAt": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          },
          "kid": {
            "type": "string"
          },
          "publicKey": {
            "type": "string"
          }
        }
      },
      "JwkResponsePaginatedResponse": {
        "type": "object",
        "required": [
          "items"
        ],
        "properties": {
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/JwkResponse"
            }
          },
          "next_page_token": {
            "type": "string"
          }
        }
      },
      "JwksResponse": {
        "type": "object",
        "required": [
          "keys"
        ],
        "properties": {
          "keys": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Jwk"
            }
          }
        }
      },
      "JwtTemplateModeConfig": {
        "type": "object",
        "required": [
          "id",
          "mapping_template",
          "validation_template"
        ],
        "properties": {
          "id": {
            "$ref": "#/components/schemas/String"
          },
          "mapping_template": {
            "$ref": "#/components/schemas/JwtTokenTemplateConfig"
          },
          "validation_template": {
            "$ref": "#/components/schemas/JwtTokenTemplateValidationConfig"
          }
        }
      },
      "JwtTokenMappingConfig": {
        "type": "object",
        "required": [
          "issuer_field",
          "audience_field",
          "sub_field",
          "group_to_role_mappings",
          "scope_to_role_mappings",
          "scope_to_group_mappings"
        ],
        "properties": {
          "audience_field": {
            "$ref": "#/components/schemas/MappingSource_String"
          },
          "email_field": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/MappingSource_String"
              }
            ]
          },
          "group_to_role_mappings": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/GroupToRoleMapping"
            }
          },
          "groups_field": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/MappingSource_String"
              }
            ]
          },
          "issuer_field": {
            "$ref": "#/components/schemas/MappingSource_String"
          },
          "scope_to_group_mappings": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ScopeToGroupMapping"
            }
          },
          "scope_to_role_mappings": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ScopeToRoleMapping"
            }
          },
          "scopes_field": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/MappingSource_String"
              }
            ]
          },
          "sub_field": {
            "$ref": "#/components/schemas/MappingSource_String"
          }
        }
      },
      "JwtTokenTemplateConfig": {
        "type": "object",
        "required": [
          "jwks_uri",
          "mapping_template"
        ],
        "properties": {
          "access_token_location": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/TokenLocation"
              }
            ]
          },
          "id_token_location": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/TokenLocation"
              }
            ]
          },
          "introspect_url": {
            "type": [
              "string",
              "null"
            ]
          },
          "jwks_uri": {
            "type": "string"
          },
          "mapping_template": {
            "$ref": "#/components/schemas/JwtTokenMappingConfig"
          },
          "userinfo_url": {
            "type": [
              "string",
              "null"
            ]
          }
        }
      },
      "JwtTokenTemplateValidationConfig": {
        "type": "object",
        "properties": {
          "issuer": {
            "type": [
              "string",
              "null"
            ]
          },
          "required_groups": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "type": "string"
            }
          },
          "required_scopes": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "type": "string"
            }
          },
          "valid_audiences": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "type": "string"
            }
          }
        }
      },
      "ListApiKeysResponse": {
        "type": "object",
        "description": "Response from listing API keys",
        "required": [
          "items"
        ],
        "properties": {
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/HashedApiKey"
            }
          },
          "next_page_token": {
            "type": [
              "string",
              "null"
            ]
          }
        }
      },
      "ListDecryptedSecretsResponse": {
        "type": "object",
        "description": "Response for listing decrypted secrets",
        "required": [
          "secrets"
        ],
        "properties": {
          "next_page_token": {
            "type": [
              "string",
              "null"
            ]
          },
          "secrets": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DecryptedSecret"
            }
          }
        }
      },
      "ListSecretsResponse": {
        "type": "object",
        "description": "Response for listing secrets",
        "required": [
          "secrets"
        ],
        "properties": {
          "next_page_token": {
            "type": [
              "string",
              "null"
            ]
          },
          "secrets": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Secret"
            }
          }
        }
      },
      "ListUserAuthFlowConfigResponse": {
        "type": "object",
        "description": "Response from listing user auth flow configurations",
        "required": [
          "items"
        ],
        "properties": {
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/GetUserAuthFlowConfigResponse"
            },
            "description": "The configurations"
          },
          "next_page_token": {
            "type": [
              "string",
              "null"
            ],
            "description": "Token for the next page, if any"
          }
        }
      },
      "ListVariablesResponse": {
        "type": "object",
        "description": "Response for listing variables",
        "required": [
          "variables"
        ],
        "properties": {
          "next_page_token": {
            "type": [
              "string",
              "null"
            ]
          },
          "variables": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Variable"
            }
          }
        }
      },
      "Machine": {
        "type": "object",
        "description": "Authenticated machine identity.\n\nRepresents an API client or automated service that authenticated via API key.",
        "required": [
          "sub",
          "role"
        ],
        "properties": {
          "role": {
            "$ref": "#/components/schemas/Role",
            "description": "Permission level of this machine"
          },
          "sub": {
            "type": "string",
            "description": "Subject identifier (user ID) of the machine account"
          }
        }
      },
      "MappingSource_String": {
        "oneOf": [
          {
            "type": "object",
            "description": "Field is in the OIDC ID token",
            "required": [
              "field",
              "type"
            ],
            "properties": {
              "field": {
                "type": "string"
              },
              "type": {
                "type": "string",
                "enum": [
                  "id_token"
                ]
              }
            }
          },
          {
            "type": "object",
            "description": "Field is in the OAuth userinfo",
            "required": [
              "field",
              "type"
            ],
            "properties": {
              "field": {
                "type": "string"
              },
              "type": {
                "type": "string",
                "enum": [
                  "userinfo"
                ]
              }
            }
          },
          {
            "type": "object",
            "description": "Field is in the OAuth access token response",
            "required": [
              "field",
              "type"
            ],
            "properties": {
              "field": {
                "type": "string"
              },
              "type": {
                "type": "string",
                "enum": [
                  "access_token"
                ]
              }
            }
          }
        ],
        "description": "Indicates which token type (ID token for OIDC, access token response for OAuth)\ncontains the field"
      },
      "McpServerInstanceSerializedWithFunctions": {
        "type": "object",
        "description": "Represents an MCP server instance with its associated functions",
        "required": [
          "id",
          "name",
          "created_at",
          "updated_at",
          "tools"
        ],
        "properties": {
          "created_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          },
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "tools": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/McpServerInstanceToolSerialized"
            }
          },
          "updated_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          }
        }
      },
      "McpServerInstanceSerializedWithFunctionsPaginatedResponse": {
        "type": "object",
        "required": [
          "items"
        ],
        "properties": {
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/McpServerInstanceSerializedWithFunctions"
            }
          },
          "next_page_token": {
            "type": "string"
          }
        }
      },
      "McpServerInstanceToolSerialized": {
        "type": "object",
        "description": "Represents a function mapping within an MCP server instance",
        "required": [
          "mcp_server_instance_id",
          "tool_deployment_type_id",
          "tool_group_deployment_type_id",
          "tool_group_instance_id",
          "tool_name",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "created_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          },
          "mcp_server_instance_id": {
            "type": "string"
          },
          "tool_deployment_type_id": {
            "type": "string"
          },
          "tool_description": {
            "type": [
              "string",
              "null"
            ]
          },
          "tool_group_deployment_type_id": {
            "type": "string"
          },
          "tool_group_instance_id": {
            "type": "string"
          },
          "tool_name": {
            "type": "string"
          },
          "updated_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          }
        }
      },
      "Metadata": {
        "type": "object",
        "additionalProperties": {},
        "propertyNames": {
          "type": "string"
        }
      },
      "MigrateAllDataEncryptionKeysParamsRoute": {
        "type": "object",
        "required": [
          "to_envelope_encryption_key_id"
        ],
        "properties": {
          "to_envelope_encryption_key_id": {
            "type": "string"
          }
        }
      },
      "MigrateDataEncryptionKeyParamsRoute": {
        "type": "object",
        "required": [
          "to_envelope_encryption_key_id"
        ],
        "properties": {
          "to_envelope_encryption_key_id": {
            "type": "string"
          }
        }
      },
      "NormalizedTokenIssuanceResult": {
        "type": "object",
        "required": [
          "access_token",
          "refresh_token",
          "expires_in"
        ],
        "properties": {
          "access_token": {
            "type": "string"
          },
          "expires_in": {
            "type": "integer",
            "format": "int64"
          },
          "refresh_token": {
            "type": "string"
          }
        }
      },
      "OauthConfig": {
        "type": "object",
        "description": "OAuth2 configuration for authorization code flow",
        "required": [
          "id",
          "authorization_endpoint",
          "token_endpoint",
          "client_id",
          "client_secret",
          "scopes",
          "jwks_endpoint",
          "mapping"
        ],
        "properties": {
          "authorization_endpoint": {
            "type": "string"
          },
          "client_id": {
            "type": "string"
          },
          "client_secret": {
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "introspect_url": {
            "type": [
              "string",
              "null"
            ],
            "description": "Token introspection endpoint URL (RFC 7662)\nIf set, access tokens are treated as opaque and introspected via this endpoint"
          },
          "jwks_endpoint": {
            "type": "string"
          },
          "mapping": {
            "$ref": "#/components/schemas/TokenMapping"
          },
          "scopes": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "token_endpoint": {
            "type": "string"
          }
        }
      },
      "OidcConfig": {
        "type": "object",
        "description": "OIDC configuration extending OAuth2 with discovery and ID token support",
        "required": [
          "id",
          "base_config",
          "mapping"
        ],
        "properties": {
          "base_config": {
            "$ref": "#/components/schemas/OauthConfig"
          },
          "discovery_endpoint": {
            "type": [
              "string",
              "null"
            ]
          },
          "id": {
            "type": "string"
          },
          "introspect_url": {
            "type": [
              "string",
              "null"
            ],
            "description": "Token introspection endpoint URL (RFC 7662)\nIf set, access tokens are treated as opaque and introspected via this endpoint"
          },
          "mapping": {
            "$ref": "#/components/schemas/TokenMapping"
          },
          "userinfo_endpoint": {
            "type": [
              "string",
              "null"
            ]
          }
        }
      },
      "PaginationRequest": {
        "type": "object",
        "required": [
          "page_size"
        ],
        "properties": {
          "next_page_token": {
            "type": [
              "string",
              "null"
            ]
          },
          "page_size": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "RefreshTokenRequest": {
        "type": "object",
        "description": "Request body for refresh token endpoint",
        "properties": {
          "refresh_token": {
            "type": [
              "string",
              "null"
            ],
            "description": "The refresh token. If not provided, will be read from cookie."
          }
        }
      },
      "RegisterToolRequest": {
        "type": "object",
        "description": "Request to register a new tool",
        "required": [
          "type_id",
          "deployment_id",
          "name",
          "documentation",
          "endpoint_configuration"
        ],
        "properties": {
          "categories": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "deployment_id": {
            "type": "string"
          },
          "documentation": {
            "type": "string"
          },
          "endpoint_configuration": {
            "$ref": "#/components/schemas/HttpEndpointConfiguration"
          },
          "metadata": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/Metadata"
              }
            ]
          },
          "name": {
            "type": "string"
          },
          "type_id": {
            "type": "string"
          }
        }
      },
      "RegisterToolResponse": {
        "type": "object",
        "description": "Response after registering a tool",
        "required": [
          "tool"
        ],
        "properties": {
          "tool": {
            "$ref": "#/components/schemas/ToolSerialized"
          }
        }
      },
      "ResourceServerCredentialSerialized": {
        "type": "object",
        "required": [
          "id",
          "type_id",
          "metadata",
          "value",
          "created_at",
          "updated_at",
          "dek_alias"
        ],
        "properties": {
          "created_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          },
          "dek_alias": {
            "type": "string"
          },
          "id": {
            "$ref": "#/components/schemas/WrappedUuidV4"
          },
          "metadata": {
            "$ref": "#/components/schemas/Metadata"
          },
          "next_rotation_time": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/WrappedChronoDateTime"
              }
            ]
          },
          "type_id": {
            "type": "string"
          },
          "updated_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          },
          "value": {
            "$ref": "#/components/schemas/WrappedJsonValue"
          }
        }
      },
      "ReturnAddress": {
        "oneOf": [
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/ReturnAddressUrl"
              },
              {
                "type": "object",
                "required": [
                  "type"
                ],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "url"
                    ]
                  }
                }
              }
            ]
          }
        ]
      },
      "ReturnAddressUrl": {
        "type": "object",
        "required": [
          "url"
        ],
        "properties": {
          "url": {
            "type": "string"
          }
        }
      },
      "Role": {
        "type": "string",
        "description": "User role in the system defining permission levels.\n\nRoles are hierarchical with Admin having the highest privileges.",
        "enum": [
          "admin",
          "maintainer",
          "agent",
          "user"
        ]
      },
      "ScimEmail": {
        "type": "object",
        "description": "SCIM 2.0 Email object for multi-valued email addresses",
        "required": [
          "value"
        ],
        "properties": {
          "primary": {
            "type": "boolean"
          },
          "type": {
            "type": [
              "string",
              "null"
            ]
          },
          "value": {
            "type": "string"
          }
        }
      },
      "ScimGroup": {
        "type": "object",
        "description": "SCIM 2.0 Group resource",
        "required": [
          "displayName"
        ],
        "properties": {
          "displayName": {
            "type": "string",
            "description": "Display name for the group"
          },
          "externalId": {
            "type": [
              "string",
              "null"
            ],
            "description": "External identifier from the IDP"
          },
          "id": {
            "type": [
              "string",
              "null"
            ],
            "description": "Unique identifier (our internal ID)"
          },
          "members": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ScimGroupMember"
            },
            "description": "Group members"
          },
          "meta": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/ScimMeta",
                "description": "Resource metadata"
              }
            ]
          },
          "schemas": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "SCIM schema URIs"
          }
        }
      },
      "ScimGroupMember": {
        "type": "object",
        "description": "SCIM 2.0 Group member reference",
        "required": [
          "value"
        ],
        "properties": {
          "$ref": {
            "type": [
              "string",
              "null"
            ]
          },
          "display": {
            "type": [
              "string",
              "null"
            ]
          },
          "type": {
            "type": [
              "string",
              "null"
            ]
          },
          "value": {
            "type": "string"
          }
        }
      },
      "ScimListResponse": {
        "type": "object",
        "description": "SCIM 2.0 ListResponse for paginated results",
        "required": [
          "schemas",
          "totalResults",
          "itemsPerPage",
          "startIndex",
          "Resources"
        ],
        "properties": {
          "Resources": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ScimGroup"
            },
            "description": "The resources"
          },
          "itemsPerPage": {
            "type": "integer",
            "format": "int64",
            "description": "Number of items per page"
          },
          "schemas": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "SCIM schema URIs"
          },
          "startIndex": {
            "type": "integer",
            "format": "int64",
            "description": "Start index (1-based)"
          },
          "totalResults": {
            "type": "integer",
            "format": "int64",
            "description": "Total number of results"
          }
        }
      },
      "ScimMeta": {
        "type": "object",
        "description": "SCIM 2.0 Meta object containing resource metadata",
        "required": [
          "resourceType"
        ],
        "properties": {
          "created": {
            "type": [
              "string",
              "null"
            ]
          },
          "lastModified": {
            "type": [
              "string",
              "null"
            ]
          },
          "location": {
            "type": [
              "string",
              "null"
            ]
          },
          "resourceType": {
            "type": "string"
          },
          "version": {
            "type": [
              "string",
              "null"
            ]
          }
        }
      },
      "ScimName": {
        "type": "object",
        "description": "SCIM 2.0 Name object for user's name components",
        "properties": {
          "familyName": {
            "type": [
              "string",
              "null"
            ]
          },
          "formatted": {
            "type": [
              "string",
              "null"
            ]
          },
          "givenName": {
            "type": [
              "string",
              "null"
            ]
          },
          "honorificPrefix": {
            "type": [
              "string",
              "null"
            ]
          },
          "honorificSuffix": {
            "type": [
              "string",
              "null"
            ]
          },
          "middleName": {
            "type": [
              "string",
              "null"
            ]
          }
        }
      },
      "ScimPatchOp": {
        "type": "string",
        "description": "SCIM 2.0 PATCH operation type",
        "enum": [
          "add",
          "remove",
          "replace"
        ]
      },
      "ScimPatchOperation": {
        "type": "object",
        "description": "SCIM 2.0 PATCH operation",
        "required": [
          "op"
        ],
        "properties": {
          "op": {
            "$ref": "#/components/schemas/ScimPatchOp"
          },
          "path": {
            "type": [
              "string",
              "null"
            ]
          },
          "value": {}
        }
      },
      "ScimPatchRequest": {
        "type": "object",
        "description": "SCIM 2.0 PATCH request",
        "required": [
          "schemas",
          "Operations"
        ],
        "properties": {
          "Operations": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ScimPatchOperation"
            }
          },
          "schemas": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "ScimUser": {
        "type": "object",
        "description": "SCIM 2.0 User resource",
        "required": [
          "userName"
        ],
        "properties": {
          "active": {
            "type": "boolean",
            "description": "Whether the user is active"
          },
          "displayName": {
            "type": [
              "string",
              "null"
            ],
            "description": "Display name"
          },
          "emails": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ScimEmail"
            },
            "description": "Email addresses"
          },
          "externalId": {
            "type": [
              "string",
              "null"
            ],
            "description": "External identifier from the IDP"
          },
          "groups": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ScimUserGroup"
            },
            "description": "Groups the user belongs to (read-only)"
          },
          "id": {
            "type": [
              "string",
              "null"
            ],
            "description": "Unique identifier (our internal ID)"
          },
          "meta": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/ScimMeta",
                "description": "Resource metadata"
              }
            ]
          },
          "name": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/ScimName",
                "description": "User's name components"
              }
            ]
          },
          "schemas": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "SCIM schema URIs"
          },
          "userName": {
            "type": "string",
            "description": "Username (unique identifier for the user)"
          }
        }
      },
      "ScimUserGroup": {
        "type": "object",
        "description": "SCIM 2.0 User group reference (for user's group membership)",
        "required": [
          "value"
        ],
        "properties": {
          "$ref": {
            "type": [
              "string",
              "null"
            ]
          },
          "display": {
            "type": [
              "string",
              "null"
            ]
          },
          "type": {
            "type": [
              "string",
              "null"
            ]
          },
          "value": {
            "type": "string"
          }
        }
      },
      "ScopeToGroupMapping": {
        "type": "object",
        "required": [
          "scope",
          "group"
        ],
        "properties": {
          "group": {
            "type": "string"
          },
          "scope": {
            "type": "string"
          }
        }
      },
      "ScopeToRoleMapping": {
        "type": "object",
        "required": [
          "scope",
          "role"
        ],
        "properties": {
          "role": {
            "$ref": "#/components/schemas/Role"
          },
          "scope": {
            "type": "string"
          }
        }
      },
      "Secret": {
        "type": "object",
        "description": "Domain model for Secret - an encrypted key-value pair",
        "required": [
          "id",
          "key",
          "encrypted_secret",
          "dek_alias",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "created_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          },
          "dek_alias": {
            "type": "string"
          },
          "encrypted_secret": {
            "type": "string"
          },
          "id": {
            "$ref": "#/components/schemas/WrappedUuidV4"
          },
          "key": {
            "type": "string"
          },
          "updated_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          }
        }
      },
      "StartUserCredentialBrokeringParamsInner": {
        "type": "object",
        "required": [
          "tool_group_instance_id"
        ],
        "properties": {
          "tool_group_instance_id": {
            "type": "string"
          }
        }
      },
      "String": {
        "type": "string"
      },
      "StsTokenConfig": {
        "oneOf": [
          {
            "type": "object",
            "required": [
              "JwtTemplate"
            ],
            "properties": {
              "JwtTemplate": {
                "$ref": "#/components/schemas/JwtTemplateModeConfig"
              }
            }
          },
          {
            "type": "object",
            "required": [
              "DevMode"
            ],
            "properties": {
              "DevMode": {
                "$ref": "#/components/schemas/DevModeConfig"
              }
            }
          }
        ]
      },
      "StsTokenConfigPaginatedResponse": {
        "type": "object",
        "required": [
          "items"
        ],
        "properties": {
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/StsTokenConfig"
            }
          },
          "next_page_token": {
            "type": "string"
          }
        }
      },
      "TokenLocation": {
        "oneOf": [
          {
            "type": "object",
            "required": [
              "Header"
            ],
            "properties": {
              "Header": {
                "type": "string"
              }
            }
          },
          {
            "type": "object",
            "required": [
              "Cookie"
            ],
            "properties": {
              "Cookie": {
                "type": "string"
              }
            }
          }
        ]
      },
      "TokenMapping": {
        "oneOf": [
          {
            "type": "object",
            "required": [
              "value",
              "type"
            ],
            "properties": {
              "type": {
                "type": "string",
                "enum": [
                  "jwt_template"
                ]
              },
              "value": {
                "$ref": "#/components/schemas/JwtTokenMappingConfig"
              }
            }
          }
        ]
      },
      "TokenResponse": {
        "type": "object",
        "description": "Response body for token refresh endpoint",
        "required": [
          "access_token",
          "expires_in",
          "token_type"
        ],
        "properties": {
          "access_token": {
            "type": "string",
            "description": "The access token"
          },
          "expires_in": {
            "type": "integer",
            "format": "int64",
            "description": "Token expiration time in seconds"
          },
          "refresh_token": {
            "type": [
              "string",
              "null"
            ],
            "description": "The refresh token (only present on initial auth, not refresh)"
          },
          "token_type": {
            "type": "string",
            "description": "Token type (always \"Bearer\")"
          }
        }
      },
      "ToolAliasSerialized": {
        "type": "object",
        "description": "Tool alias for version management",
        "required": [
          "tool_type_id",
          "tool_deployment_id",
          "alias",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "alias": {
            "type": "string",
            "description": "Alias name (e.g., \"latest\", \"stable\", \"beta\")"
          },
          "created_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime",
            "description": "When this alias was created"
          },
          "tool_deployment_id": {
            "type": "string",
            "description": "Deployment ID of the tool this alias points to"
          },
          "tool_type_id": {
            "type": "string",
            "description": "Type ID of the tool this alias points to"
          },
          "updated_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime",
            "description": "When this alias was last updated"
          }
        }
      },
      "ToolDeploymentSerialized": {
        "type": "object",
        "required": [
          "type_id",
          "name",
          "documentation",
          "parameters",
          "output",
          "categories"
        ],
        "properties": {
          "categories": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "documentation": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "output": {
            "$ref": "#/components/schemas/JsonSchema"
          },
          "parameters": {
            "$ref": "#/components/schemas/JsonSchema"
          },
          "type_id": {
            "type": "string"
          }
        }
      },
      "ToolGroupCredentialDeploymentSerialized": {
        "type": "object",
        "required": [
          "type_id",
          "configuration_schema",
          "name",
          "documentation",
          "requires_brokering",
          "requires_resource_server_credential_refreshing",
          "requires_user_credential_refreshing"
        ],
        "properties": {
          "configuration_schema": {
            "$ref": "#/components/schemas/ConfigurationSchema"
          },
          "documentation": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "requires_brokering": {
            "type": "boolean"
          },
          "requires_resource_server_credential_refreshing": {
            "type": "boolean"
          },
          "requires_user_credential_refreshing": {
            "type": "boolean"
          },
          "type_id": {
            "type": "string"
          }
        }
      },
      "ToolGroupDeploymentSerialized": {
        "type": "object",
        "required": [
          "type_id",
          "name",
          "categories",
          "documentation",
          "tools",
          "credential_deployments"
        ],
        "properties": {
          "categories": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "credential_deployments": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ToolGroupCredentialDeploymentSerialized"
            }
          },
          "documentation": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "tools": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ToolDeploymentSerialized"
            }
          },
          "type_id": {
            "type": "string"
          }
        }
      },
      "ToolGroupInstanceListItem": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ToolGroupInstanceSerialized"
          },
          {
            "type": "object",
            "required": [
              "tools",
              "source",
              "credential_source"
            ],
            "properties": {
              "credential_source": {
                "$ref": "#/components/schemas/ToolGroupCredentialDeploymentSerialized"
              },
              "source": {
                "$ref": "#/components/schemas/ToolGroupDeploymentSerialized"
              },
              "tools": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/ToolInstanceListItem"
                }
              }
            }
          }
        ]
      },
      "ToolGroupInstanceListItemPaginatedResponse": {
        "type": "object",
        "required": [
          "items"
        ],
        "properties": {
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ToolGroupInstanceListItem"
            }
          },
          "next_page_token": {
            "type": "string"
          }
        }
      },
      "ToolGroupInstanceSerialized": {
        "type": "object",
        "required": [
          "id",
          "display_name",
          "resource_server_credential_id",
          "created_at",
          "updated_at",
          "tool_group_deployment_type_id",
          "credential_deployment_type_id",
          "status"
        ],
        "properties": {
          "created_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          },
          "credential_deployment_type_id": {
            "type": "string"
          },
          "display_name": {
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "resource_server_credential_id": {
            "$ref": "#/components/schemas/WrappedUuidV4"
          },
          "return_on_successful_brokering": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/ReturnAddress"
              }
            ]
          },
          "status": {
            "type": "string"
          },
          "tool_group_deployment_type_id": {
            "type": "string"
          },
          "updated_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          },
          "user_credential_id": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/WrappedUuidV4"
              }
            ]
          }
        }
      },
      "ToolGroupInstanceSerializedWithCredentials": {
        "type": "object",
        "required": [
          "tool_group_instance",
          "resource_server_credential"
        ],
        "properties": {
          "resource_server_credential": {
            "$ref": "#/components/schemas/ResourceServerCredentialSerialized"
          },
          "tool_group_instance": {
            "$ref": "#/components/schemas/ToolGroupInstanceSerialized"
          },
          "user_credential": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/UserCredentialSerialized"
              }
            ]
          }
        }
      },
      "ToolGroupInstanceSerializedWithEverything": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ToolGroupInstanceSerializedWithCredentials"
          },
          {
            "type": "object",
            "required": [
              "tools",
              "source",
              "credential_source"
            ],
            "properties": {
              "credential_source": {
                "$ref": "#/components/schemas/ToolGroupCredentialDeploymentSerialized"
              },
              "source": {
                "$ref": "#/components/schemas/ToolGroupDeploymentSerialized"
              },
              "tools": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/ToolInstanceListItem"
                }
              }
            }
          }
        ]
      },
      "ToolInstanceConfig": {
        "type": "object",
        "required": [
          "tool_source",
          "tool_group",
          "tool_group_instances"
        ],
        "properties": {
          "tool_group": {
            "$ref": "#/components/schemas/ToolGroupDeploymentSerialized"
          },
          "tool_group_instances": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ToolGroupInstanceSerializedWithCredentials"
            }
          },
          "tool_source": {
            "$ref": "#/components/schemas/ToolDeploymentSerialized"
          }
        }
      },
      "ToolInstanceConfigPaginatedResponse": {
        "type": "object",
        "required": [
          "items"
        ],
        "properties": {
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ToolInstanceConfig"
            }
          },
          "next_page_token": {
            "type": "string"
          }
        }
      },
      "ToolInstanceListItem": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ToolInstanceSerialized"
          },
          {
            "type": "object",
            "required": [
              "source"
            ],
            "properties": {
              "source": {
                "$ref": "#/components/schemas/ToolDeploymentSerialized"
              }
            }
          }
        ]
      },
      "ToolInstanceSerialized": {
        "type": "object",
        "required": [
          "tool_deployment_type_id",
          "tool_group_deployment_type_id",
          "tool_group_instance_id",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "created_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          },
          "tool_deployment_type_id": {
            "type": "string"
          },
          "tool_group_deployment_type_id": {
            "type": "string"
          },
          "tool_group_instance_id": {
            "type": "string"
          },
          "updated_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          }
        }
      },
      "ToolInstanceSerializedPaginatedResponse": {
        "type": "object",
        "required": [
          "items"
        ],
        "properties": {
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ToolInstanceSerialized"
            }
          },
          "next_page_token": {
            "type": "string"
          }
        }
      },
      "ToolSerialized": {
        "type": "object",
        "description": "Tool definition with type and deployment identifiers",
        "required": [
          "type_id",
          "deployment_id",
          "name",
          "documentation",
          "categories",
          "endpoint_type",
          "endpoint_configuration",
          "metadata",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "categories": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Categories this tool belongs to (for filtering and discovery)"
          },
          "created_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime",
            "description": "When this tool was registered"
          },
          "deployment_id": {
            "type": "string",
            "description": "Deployment identifier (e.g., \"v1.0.0\", \"production\")"
          },
          "documentation": {
            "type": "string",
            "description": "Documentation describing the tool's purpose and usage"
          },
          "endpoint_configuration": {
            "type": "object",
            "description": "Encrypted endpoint configuration"
          },
          "endpoint_type": {
            "$ref": "#/components/schemas/EndpointType",
            "description": "Type of endpoint (http)"
          },
          "metadata": {
            "$ref": "#/components/schemas/Metadata",
            "description": "Additional metadata"
          },
          "name": {
            "type": "string",
            "description": "Display name of the tool"
          },
          "type_id": {
            "type": "string",
            "description": "Unique type identifier for this tool (e.g., \"weather-api\")"
          },
          "updated_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime",
            "description": "When this tool was last updated"
          }
        }
      },
      "TupleUnit": {
        "default": null
      },
      "UpdateAliasParams": {
        "type": "object",
        "required": [
          "new_dek_id"
        ],
        "properties": {
          "new_dek_id": {
            "type": "string"
          }
        }
      },
      "UpdateGroupRequest": {
        "type": "object",
        "required": [
          "name"
        ],
        "properties": {
          "name": {
            "type": "string",
            "description": "Group name"
          }
        }
      },
      "UpdateMcpServerInstanceFunctionRequest": {
        "type": "object",
        "required": [
          "tool_name"
        ],
        "properties": {
          "tool_description": {
            "type": [
              "string",
              "null"
            ]
          },
          "tool_name": {
            "type": "string"
          }
        }
      },
      "UpdateMcpServerInstanceRequest": {
        "type": "object",
        "required": [
          "name"
        ],
        "properties": {
          "name": {
            "type": "string"
          }
        }
      },
      "UpdateSecretRequest": {
        "type": "object",
        "description": "Request to update an existing secret",
        "required": [
          "raw_value"
        ],
        "properties": {
          "raw_value": {
            "type": "string"
          }
        }
      },
      "UpdateToolAliasRequest": {
        "type": "object",
        "required": [
          "tool_deployment_id"
        ],
        "properties": {
          "tool_deployment_id": {
            "type": "string"
          }
        }
      },
      "UpdateToolGroupInstanceParamsInner": {
        "type": "object",
        "required": [
          "display_name"
        ],
        "properties": {
          "display_name": {
            "type": "string"
          }
        }
      },
      "UpdateUserRequest": {
        "type": "object",
        "properties": {
          "email": {
            "type": [
              "string",
              "null"
            ],
            "description": "User's email address"
          },
          "role": {
            "type": [
              "string",
              "null"
            ],
            "description": "User's role"
          }
        }
      },
      "UpdateVariableRequest": {
        "type": "object",
        "description": "Request to update an existing variable",
        "required": [
          "value"
        ],
        "properties": {
          "value": {
            "type": "string"
          }
        }
      },
      "User": {
        "type": "object",
        "description": "A user entity in the system.\n\nRepresents both human users and machine accounts with their associated metadata.",
        "required": [
          "id",
          "user_type",
          "role",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "created_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime",
            "description": "Timestamp when the user was created (UTC)"
          },
          "description": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional human-readable description of the user or its purpose"
          },
          "email": {
            "type": [
              "string",
              "null"
            ],
            "description": "Email address (required for human users, optional for machines)"
          },
          "id": {
            "type": "string",
            "description": "Unique identifier (UUID format)"
          },
          "role": {
            "$ref": "#/components/schemas/Role",
            "description": "Permission level assigned to this user"
          },
          "updated_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime",
            "description": "Timestamp when the user was last modified (UTC)"
          },
          "user_type": {
            "$ref": "#/components/schemas/UserType",
            "description": "Whether this is a machine or human user"
          }
        }
      },
      "UserAuthFlowConfig": {
        "oneOf": [
          {
            "type": "object",
            "required": [
              "value",
              "type"
            ],
            "properties": {
              "type": {
                "type": "string",
                "enum": [
                  "oidc_authorization_code_flow"
                ]
              },
              "value": {
                "$ref": "#/components/schemas/OidcConfig"
              }
            }
          },
          {
            "type": "object",
            "required": [
              "value",
              "type"
            ],
            "properties": {
              "type": {
                "type": "string",
                "enum": [
                  "oauth_authorization_code_flow"
                ]
              },
              "value": {
                "$ref": "#/components/schemas/OauthConfig"
              }
            }
          },
          {
            "type": "object",
            "required": [
              "value",
              "type"
            ],
            "properties": {
              "type": {
                "type": "string",
                "enum": [
                  "oidc_authorization_code_pkce_flow"
                ]
              },
              "value": {
                "$ref": "#/components/schemas/OidcConfig"
              }
            }
          },
          {
            "type": "object",
            "required": [
              "value",
              "type"
            ],
            "properties": {
              "type": {
                "type": "string",
                "enum": [
                  "oauth_authorization_code_pkce_flow"
                ]
              },
              "value": {
                "$ref": "#/components/schemas/OauthConfig"
              }
            }
          }
        ],
        "description": "The four supported IdP configuration types"
      },
      "UserCredentialBrokeringResponse": {
        "oneOf": [
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/BrokerState"
              },
              {
                "type": "object",
                "required": [
                  "type"
                ],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "broker_state"
                    ]
                  }
                }
              }
            ]
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/UserCredentialSerialized"
              },
              {
                "type": "object",
                "required": [
                  "type"
                ],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "user_credential"
                    ]
                  }
                }
              }
            ]
          },
          {
            "type": "object",
            "required": [
              "type"
            ],
            "properties": {
              "type": {
                "type": "string",
                "enum": [
                  "redirect"
                ]
              }
            }
          }
        ]
      },
      "UserCredentialSerialized": {
        "type": "object",
        "required": [
          "id",
          "type_id",
          "metadata",
          "value",
          "created_at",
          "updated_at",
          "dek_alias"
        ],
        "properties": {
          "created_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          },
          "dek_alias": {
            "type": "string"
          },
          "id": {
            "$ref": "#/components/schemas/WrappedUuidV4"
          },
          "metadata": {
            "$ref": "#/components/schemas/Metadata"
          },
          "next_rotation_time": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/WrappedChronoDateTime"
              }
            ]
          },
          "type_id": {
            "type": "string"
          },
          "updated_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          },
          "value": {
            "$ref": "#/components/schemas/WrappedJsonValue"
          }
        }
      },
      "UserGroupWithGroup": {
        "type": "object",
        "required": [
          "membership",
          "group"
        ],
        "properties": {
          "group": {
            "$ref": "#/components/schemas/Group"
          },
          "membership": {
            "$ref": "#/components/schemas/GroupMembership"
          }
        }
      },
      "UserGroupWithGroupPaginatedResponse": {
        "type": "object",
        "required": [
          "items"
        ],
        "properties": {
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/UserGroupWithGroup"
            }
          },
          "next_page_token": {
            "type": "string"
          }
        }
      },
      "UserPaginatedResponse": {
        "type": "object",
        "required": [
          "items"
        ],
        "properties": {
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/User"
            }
          },
          "next_page_token": {
            "type": "string"
          }
        }
      },
      "UserType": {
        "type": "string",
        "description": "Type of user identity in the system.\n\nDistinguishes between automated services and real users.",
        "enum": [
          "machine",
          "human"
        ]
      },
      "Variable": {
        "type": "object",
        "description": "Domain model for Variable - a plain-text key-value pair",
        "required": [
          "id",
          "key",
          "value",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "created_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          },
          "id": {
            "$ref": "#/components/schemas/WrappedUuidV4"
          },
          "key": {
            "type": "string"
          },
          "updated_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          },
          "value": {
            "type": "string"
          }
        }
      },
      "WrappedChronoDateTime": {
        "type": "string",
        "format": "date-time"
      },
      "WrappedJsonValue": {},
      "WrappedUuidV4": {
        "type": "string",
        "format": "uuid"
      }
    },
    "securitySchemes": {
      "api_key": {
        "type": "apiKey",
        "in": "header",
        "name": "X-API-Key"
      },
      "bearer_token": {
        "type": "http",
        "scheme": "bearer"
      }
    }
  },
  "tags": [
    {
      "name": "secret",
      "description": "Secret management endpoints for storing and retrieving encrypted secrets"
    },
    {
      "name": "variable",
      "description": "Environment variable management endpoints for storing and retrieving variables"
    },
    {
      "name": "encryption",
      "description": "Encryption key management endpoints for envelope keys, data encryption keys, and aliases"
    },
    {
      "name": "mcp",
      "description": "MCP endpoints for managing providers, credentials, functions, and MCP protocol communication"
    },
    {
      "name": "_internal",
      "description": "Internal endpoints for health checks, runtime configuration"
    },
    {
      "name": "identity",
      "description": "Identity management endpoints for JWKs (JSON Web Keys) and authentication"
    },
    {
      "name": "v1",
      "description": "API version v1 endpoints"
    }
  ]
}