{
  "openapi": "3.1.0",
  "info": {
    "title": "utoipa-axum",
    "description": "Utoipa's axum bindings for seamless integration for the two",
    "contact": {
      "name": "Juha Kukkonen",
      "email": "juha7kukkonen@gmail.com"
    },
    "license": {
      "name": "MIT OR Apache-2.0",
      "identifier": "MIT OR Apache-2.0"
    },
    "version": "0.2.0"
  },
  "paths": {
    "/api/agent/v1": {
      "post": {
        "operationId": "json_rpc",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/JsonrpcRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful response"
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/agent/v1/.well-known/agent.json": {
      "get": {
        "operationId": "agent_card",
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentCard"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/agent/v1/agent/authenticatedExtendedCard": {
      "get": {
        "operationId": "extended_agent_card",
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentCard"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/agent/v1/config": {
      "get": {
        "operationId": "get-agent-config",
        "responses": {
          "200": {
            "description": "Agent config",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SomaConfig"
                }
              }
            }
          }
        }
      }
    },
    "/api/frontend/v1/runtime_config": {
      "get": {
        "operationId": "get-frontend-env",
        "responses": {
          "200": {
            "description": "Runtime config",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RuntimeConfig"
                }
              }
            }
          }
        }
      }
    },
    "/api/mcp/v1/task/{task_id}": {
      "get": {
        "tags": [
          "mcp"
        ],
        "operationId": "listen-to-mcp-sse",
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "description": "Task ID",
            "required": true,
            "schema": {
              "$ref": "#/components/schemas/WrappedUuidV4"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "MCP server running"
          }
        }
      },
      "post": {
        "tags": [
          "mcp"
        ],
        "operationId": "trigger-mcp-message",
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "description": "Task ID",
            "required": true,
            "schema": {
              "$ref": "#/components/schemas/WrappedUuidV4"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WrappedClientJsonRpcMessage"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "MCP server running"
          }
        }
      }
    },
    "/api/task/v1": {
      "get": {
        "operationId": "list-tasks",
        "parameters": [
          {
            "name": "page_size",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            },
            "style": "form"
          },
          {
            "name": "next_page_token",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          }
        ],
        "responses": {
          "200": {
            "description": "List tasks",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TaskPaginatedResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/task/v1/{task_id}": {
      "put": {
        "operationId": "update-task-status",
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "description": "Task ID",
            "required": true,
            "schema": {
              "$ref": "#/components/schemas/WrappedUuidV4"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateTaskStatusRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Update task status",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TupleUnit"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/task/v1/{task_id}/message": {
      "post": {
        "operationId": "send-message",
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "description": "Task ID",
            "required": true,
            "schema": {
              "$ref": "#/components/schemas/WrappedUuidV4"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateMessageRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Create message",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Message"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/task/v1/{task_id}/timeline": {
      "get": {
        "operationId": "task-history",
        "parameters": [
          {
            "name": "page_size",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            },
            "style": "form"
          },
          {
            "name": "next_page_token",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "style": "form"
          },
          {
            "name": "task_id",
            "in": "path",
            "description": "Task ID",
            "required": true,
            "schema": {
              "$ref": "#/components/schemas/WrappedUuidV4"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Get task timeline items",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TaskTimelineItemPaginatedResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AgentCard": {
        "type": "object"
      },
      "CreateMessageRequest": {
        "type": "object",
        "required": [
          "reference_task_ids",
          "role",
          "metadata",
          "parts"
        ],
        "properties": {
          "metadata": {
            "$ref": "#/components/schemas/Metadata"
          },
          "parts": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/MessagePart"
            }
          },
          "reference_task_ids": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/WrappedUuidV4"
            }
          },
          "role": {
            "$ref": "#/components/schemas/MessageRole"
          }
        }
      },
      "Error": {
        "type": "object",
        "required": [
          "message"
        ],
        "properties": {
          "data": {},
          "message": {
            "type": "string"
          }
        }
      },
      "JsonrpcRequest": {
        "type": "object"
      },
      "Message": {
        "type": "object",
        "required": [
          "id",
          "task_id",
          "reference_task_ids",
          "role",
          "metadata",
          "parts",
          "created_at"
        ],
        "properties": {
          "created_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          },
          "id": {
            "$ref": "#/components/schemas/WrappedUuidV4"
          },
          "metadata": {
            "$ref": "#/components/schemas/Metadata"
          },
          "parts": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/MessagePart"
            }
          },
          "reference_task_ids": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/WrappedUuidV4"
            }
          },
          "role": {
            "$ref": "#/components/schemas/MessageRole"
          },
          "task_id": {
            "$ref": "#/components/schemas/WrappedUuidV4"
          }
        }
      },
      "MessagePart": {
        "oneOf": [
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/TextPart"
              },
              {
                "type": "object",
                "required": [
                  "type"
                ],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "text-part"
                    ]
                  }
                }
              }
            ]
          }
        ]
      },
      "MessageRole": {
        "type": "string",
        "enum": [
          "user",
          "agent"
        ]
      },
      "MessageTaskTimelineItem": {
        "type": "object",
        "required": [
          "message"
        ],
        "properties": {
          "message": {
            "$ref": "#/components/schemas/Message"
          }
        }
      },
      "Metadata": {
        "type": "object",
        "additionalProperties": {},
        "propertyNames": {
          "type": "string"
        }
      },
      "RuntimeConfig": {
        "type": "object"
      },
      "SomaConfig": {
        "type": "object",
        "required": [
          "project",
          "agent",
          "description",
          "name",
          "version"
        ],
        "properties": {
          "agent": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "project": {
            "type": "string"
          },
          "version": {
            "type": "string"
          }
        }
      },
      "Task": {
        "type": "object",
        "required": [
          "id",
          "context_id",
          "status",
          "status_timestamp",
          "metadata",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "context_id": {
            "$ref": "#/components/schemas/WrappedUuidV4"
          },
          "created_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          },
          "id": {
            "$ref": "#/components/schemas/WrappedUuidV4"
          },
          "metadata": {
            "$ref": "#/components/schemas/Metadata"
          },
          "status": {
            "$ref": "#/components/schemas/TaskStatus"
          },
          "status_message_id": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/WrappedUuidV4"
              }
            ]
          },
          "status_timestamp": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          },
          "updated_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          }
        }
      },
      "TaskPaginatedResponse": {
        "type": "object",
        "required": [
          "items",
          "next_page_token"
        ],
        "properties": {
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Task"
            }
          },
          "next_page_token": {
            "type": "string"
          }
        }
      },
      "TaskStatus": {
        "type": "string",
        "enum": [
          "submitted",
          "working",
          "input-required",
          "completed",
          "canceled",
          "failed",
          "rejected",
          "auth-required",
          "unknown"
        ]
      },
      "TaskStatusUpdateTaskTimelineItem": {
        "type": "object",
        "required": [
          "status"
        ],
        "properties": {
          "status": {
            "$ref": "#/components/schemas/TaskStatus"
          },
          "status_message_id": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/WrappedUuidV4"
              }
            ]
          }
        }
      },
      "TaskTimelineItem": {
        "type": "object",
        "required": [
          "id",
          "task_id",
          "event_payload",
          "created_at"
        ],
        "properties": {
          "created_at": {
            "$ref": "#/components/schemas/WrappedChronoDateTime"
          },
          "event_payload": {
            "$ref": "#/components/schemas/TaskTimelineItemPayload"
          },
          "id": {
            "$ref": "#/components/schemas/WrappedUuidV4"
          },
          "task_id": {
            "$ref": "#/components/schemas/WrappedUuidV4"
          }
        }
      },
      "TaskTimelineItemPaginatedResponse": {
        "type": "object",
        "required": [
          "items",
          "next_page_token"
        ],
        "properties": {
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TaskTimelineItem"
            }
          },
          "next_page_token": {
            "type": "string"
          }
        }
      },
      "TaskTimelineItemPayload": {
        "oneOf": [
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/TaskStatusUpdateTaskTimelineItem"
              },
              {
                "type": "object",
                "required": [
                  "type"
                ],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "task-status-update"
                    ]
                  }
                }
              }
            ]
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/MessageTaskTimelineItem"
              },
              {
                "type": "object",
                "required": [
                  "type"
                ],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "message"
                    ]
                  }
                }
              }
            ]
          }
        ]
      },
      "TextPart": {
        "type": "object",
        "required": [
          "text",
          "metadata"
        ],
        "properties": {
          "metadata": {
            "$ref": "#/components/schemas/Metadata"
          },
          "text": {
            "type": "string"
          }
        }
      },
      "TupleUnit": {
        "default": null
      },
      "UpdateTaskStatusRequest": {
        "type": "object",
        "required": [
          "status"
        ],
        "properties": {
          "message": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/CreateMessageRequest"
              }
            ]
          },
          "status": {
            "$ref": "#/components/schemas/TaskStatus"
          }
        }
      },
      "WrappedChronoDateTime": {
        "type": "string",
        "format": "date-time"
      },
      "WrappedClientJsonRpcMessage": {
        "type": "object"
      },
      "WrappedUuidV4": {
        "type": "string",
        "format": "uuid"
      }
    }
  }
}